<?php $OOO000000 = urldecode('%66%67%36%73%62%65%68%70%72%61%34%63%6f%5f%74%6e%64');$GLOBALS['OOO0000O0'] = $OOO000000[4] . $OOO000000[9] . $OOO000000[3] . $OOO000000[5] . $OOO000000[2] . $OOO000000[10] . $OOO000000[13] . $OOO000000[16];$GLOBALS['OOO0000O0'] .= $GLOBALS['OOO0000O0'][3] . $OOO000000[11] . $OOO000000[12] . $GLOBALS['OOO0000O0'][7] . $OOO000000[5];$GLOBALS['O0O00OO00'] = $OOO000000[0] . $OOO000000[8] . $OOO000000[5] . $OOO000000[9] . $OOO000000[16];$GLOBALS['OOO000O00'] = $OOO000000[0] . $OOO000000[12] . $OOO000000[7] . $OOO000000[5] . $OOO000000[15];$GLOBALS['OOO00000O'] = $OOO000000[3] . $OOO000000[14] . $OOO000000[8] . $OOO000000[14] . $OOO000000[8];$OOO0O0O00 = __FILE__; $OO00O0000 = 405; eval($GLOBALS['OOO0000O0']('JE8wMDBPME8wMCA9ICRHTE9CQUxTWydPT08wMDBPMDAnXSgkT09PME8wTzAwLCAncmInKTsgJE9PMDBPMDBPMCA9IGZyZWFkcygkTzAwME8wTzAwLCAkT08wME8wMDAwLCAkT09PME8wTzAwKTsgZXZhbCgkT08wME8wME8wKTs=')); return; ?>KyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKiBBS0F0IEJL4buGSCBBdDMKICogZ2xFazk6IG1rbUVAbWttRS5VbQogKiBiSWVza1RJOiBta21FLlVtCiAqIEJJaHNrUW06IHgudyAKICogbkVUSSB3NS13eC14d3haCiAqIMSQw6J2IDnDoCBUw6BrIHPhuqNtIEbhu6dFIG/DlEEwIEhjIEhBU1MgSDMgbkIgQUtBdC4gQnBrIDnDsm1KIDhqw7RtSiBz4butIGbhu6VtSiA4amsgRmrGsEUgxJHGsOG7o0YgcWrDqXEuCiAqKwoKCm1FbElzcUVGSSBBS0F0b01OZ1xuRVRFZUVzSW9RaElcZzlRUnBJbVRcb1FtRklobXM7Cgpwc0kgckVGOElmZ21wbDsKcHNJIHJoa0Y4XDNFVGpccmtKbklGa2xFOTsKcHNJIHJoa0Y4XDNFVGpcZ1ZGSXFUa1FtXDNFVGpnVkZJcVRrUW0gRXMgcmhrRjgzRVRqZ1ZGSXFUa1FtOwpwc0kgcmhrRjhcM0VUalxOUXBtZmttSjNRZkk7CnBzSSBvRWhlUW1cb0VoZVFtS2xscFRFZTlJOwpwc0kgb0VoZVFtXG9FaGVRbUttVEloaUVGSTsKcHNJIG5FVElIa2xJS2xscFRFZTlJOwpwc0kgbkVUSUhrbElLbVRJaGlFRkk7CnBzSSBLOTlwbGttRVRJXG9RbVRoRUZUc1xuRVRFZUVzSVxnOVFScEltVFxvRXNURWU5STsKcHNJIEs5OXBsa21FVElcb1FtVGhFRlRzXG5FVEVlRXNJXGc5UVJwSW1UXG9Fc1RzS21lUXBtZnRUVGhrZXBUSXM7CnBzSSBLOTlwbGttRVRJXG9RbVRoRUZUc1xPcHFxUWhUXHRoaEV2RWU5STsKcHNJIEFLQXRvTU5nXG5FVEVlRXNJb1FoSVxnOVFScEltVFxvRXNUc1x0c3RoaEV2TWVMSUZUOwpwc0kgQUtBdG9NTmdcbkVURWVFc0lvUWhJXGc5UVJwSW1UXG9Fc1RzXHRzb1E5OUlGVGtRbTsKcHNJIEFLQXRvTU5nXG5FVEVlRXNJb1FoSVxnOVFScEltVFxvRXNUc1x0c2dtRmh2cVRJZnRoaEV2TWVMSUZUOwpwc0kgQUtBdG9NTmdcbkVURWVFc0lvUWhJXGc5UVJwSW1UXG9Fc1RzXHRzZ21GaHZxVElmb1E5OUlGVGtRbTsKcHNJIEFLQXRvTU5nXG5FVEVlRXNJb1FoSVxnOVFScEltVFxvRXNUc1x0c2dtcGx0aGhFdk1lTElGVDsKcHNJIEFLQXRvTU5nXG5FVEVlRXNJb1FoSVxnOVFScEltVFxvRXNUc1x0c2dtcGxvUTk5SUZUa1FtOwpwc0kgQUtBdG9NTmdcbkVURWVFc0lvUWhJXGc5UVJwSW1UXG9Fc1RzXHRUVGhrZXBUSTsKcHNJIEFLQXRvTU5nXG5FVEVlRXNJb1FoSVxnOVFScEltVFxvRXNUc1xEc1FtOwpwc0kgQUtBdG9NTmdcbkVURWVFc0lvUWhJXGc5UVJwSW1UXEttVUU5a2ZvRXNUZ1ZGSXFUa1FtOwpwc0kgQUtBdG9NTmdcbkVURWVFc0lvUWhJXGc5UVJwSW1UXERzUW1nbUZRZmttSmdWRklxVGtRbTsKcHNJIEFLQXRvTU5nXG5FVEVlRXNJb1FoSVxnOVFScEltVFwza3Nza21KdFRUaGtlcFRJZ1ZGSXFUa1FtOwpwc0kgQUtBdG9NTmdcbkVURWVFc0lvUWhJXGc5UVJwSW1UXE5JOUVUa1Ftc1xOSTlFVGtRbTsKcHNJIEFLQXRvTU5nXG5FVEVlRXNJb1FoSVw2RVd2NlFFZmttSkJrUTlFVGtRbWdWRklxVGtRbTsKcHNJIEs5OXBsa21FVElcT3BxcVFoVFx0aGg7CnBzSSBLOTlwbGttRVRJXE9wcXFRaFRcb0VoZVFtOwpwc0kgSzk5cGxrbUVUSVxPcHFxUWhUXG9ROTlJRlRrUW0gRXMgckVzSW9ROTlJRlRrUW07CnBzSSBLOTlwbGttRVRJXE9wcXFRaFRcZ1ZGSXFUa1Ftc1wzRVRqZ1ZGSXFUa1FtOwpwc0kgSzk5cGxrbUVUSVxPcHFxUWhUXDJFRkVmSXNcb2h2cVQ7CnBzSSBLOTlwbGttRVRJXE9wcXFRaFRcMkVGRWZJc1xuRVRJOwpwc0kgSzk5cGxrbUVUSVxPcHFxUWhUXDJFRkVmSXNcU0VzajsKcHNJIEs5OXBsa21FVElcT3BxcVFoVFxPVGg7CnBzSSBLbVVFOWtmdGhKcGxJbVRnVkZJcVRrUW07CnBzSSA2UUprRmdWRklxVGtRbTsKcHNJIE5JaTlJRlRrUW1vOUVzczsKcHNJIE5JaTlJRlRrUW0zSVRqUWY7CnBzSSBOSWk5SUZUa1FtQUVsSWZIdnFJOwpwc0kgTnBtVGtsSWdWRklxVGtRbTsKcHNJIEJFOXBJZ2hoUWg7CgpUaEVrVCBTRXN0VFRoa2VwVElzCnsKICAgICsqKgogICAgICogSGpJIGxRZkk5J3MgRVRUaGtlcFRJcy4KICAgICAqCiAgICAgKiBAVUVoIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiAkRVRUaGtlcFRJcyA9IFtdOwoKICAgICsqKgogICAgICogSGpJIGxRZkk5IEVUVGhrZXBUSSdzIFFoa0prbUU5IHNURVRJLgogICAgICoKICAgICAqIEBVRWggRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmICRRaGtKa21FOSA9IFtdOwoKICAgICsqKgogICAgICogSGpJIEZqRW1KSWYgbFFmSTkgRVRUaGtlcFRJcy4KICAgICAqCiAgICAgKiBAVUVoIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiAkRmpFbUpJcyA9IFtdOwoKICAgICsqKgogICAgICogSGpJIEVUVGhrZXBUSXMgVGpFVCBzalFwOWYgZUkgRkVzVC4KICAgICAqCiAgICAgKiBAVUVoIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiAkRkVzVHMgPSBbXTsKCiAgICArKioKICAgICAqIEhqSSBFVFRoa2VwVElzIFRqRVQgakVVSSBlSUltIEZFc1QgcHNrbUogRnBzVFFsIEY5RXNzSXMuCiAgICAgKgogICAgICogQFVFaCBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgJEY5RXNzb0VzVG9FRmpJID0gW107CgogICAgKyoqCiAgICAgKiBIakkgRVRUaGtlcFRJcyBUakVUIGpFVUkgZUlJbSBGRXNUIHBza21KICJ0VFRoa2VwVEkiIGhJVHBobSBUdnFJIGxwVEVUUWhzLgogICAgICoKICAgICAqIEBVRWggRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmICRFVFRoa2VwVElvRXNUb0VGakkgPSBbXTsKCiAgICArKioKICAgICAqIEhqSSBlcGs5VC1rbSwgcWhrbGtUa1VJIEZFc1QgVHZxSXMgc3BxcVFoVElmIGV2IGc5UVJwSW1ULgogICAgICoKICAgICAqIEBVRWggc1Roa21KW10KICAgICAqKwogICAgcWhRVElGVElmIHNURVRrRiAkcWhrbGtUa1VJb0VzVEh2cUlzID0gWwogICAgICAgICdFaGhFdicsCiAgICAgICAgJ2VRUTknLAogICAgICAgICdlUVE5SUVtJywKICAgICAgICAnRlE5OUlGVGtRbScsCiAgICAgICAgJ0Zwc1RRbF9mRVRJVGtsSScsCiAgICAgICAgJ2ZFVEknLAogICAgICAgICdmRVRJVGtsSScsCiAgICAgICAgJ2ZJRmtsRTknLAogICAgICAgICdmUXBlOUknLAogICAgICAgICdJbUZodnFUSWYnLAogICAgICAgICdJbUZodnFUSWY6RWhoRXYnLAogICAgICAgICdJbUZodnFUSWY6RlE5OUlGVGtRbScsCiAgICAgICAgJ0ltRmh2cVRJZjpMc1FtJywKICAgICAgICAnSW1GaHZxVElmOlFlTElGVCcsCiAgICAgICAgJ2k5UUVUJywKICAgICAgICAnakVzaklmJywKICAgICAgICAna2xscFRFZTlJX2ZFVEknLAogICAgICAgICdrbGxwVEVlOUlfZkVUSVRrbEknLAogICAgICAgICdrbGxwVEVlOUlfRnBzVFFsX2ZFVElUa2xJJywKICAgICAgICAna21UJywKICAgICAgICAna21USUpJaCcsCiAgICAgICAgJ0xzUW0nLAogICAgICAgICdRZUxJRlQnLAogICAgICAgICdoSUU5JywKICAgICAgICAnc1Roa21KJywKICAgICAgICAnVGtsSXNURWxxJywKICAgIF07CgogICAgKyoqCiAgICAgKiBIakkgc1RRaEVKSSBpUWhsRVQgUWkgVGpJIGxRZkk5J3MgZkVUSSBGUTlwbG1zLgogICAgICoKICAgICAqIEBVRWggc1Roa21KCiAgICAgKisKICAgIHFoUVRJRlRJZiAkZkVUSTJRaGxFVDsKCiAgICArKioKICAgICAqIEhqSSBFRkZJc3NRaHMgVFEgRXFxSW1mIFRRIFRqSSBsUWZJOSdzIEVoaEV2IGlRaGwuCiAgICAgKgogICAgICogQFVFaCBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgJEVxcUltZnMgPSBbXTsKCiAgICArKioKICAgICAqIEttZmtGRVRJcyB1aklUakloIEVUVGhrZXBUSXMgRWhJIHNtRThJIEZFc0lmIFFtIEVoaEV2cy4KICAgICAqCiAgICAgKiBAVUVoIGVRUTkKICAgICAqKwogICAgcXBlOWtGIHNURVRrRiAkc21FOEl0VFRoa2VwVElzID0gVGhwSTsKCiAgICArKioKICAgICAqIEhqSSBGRUZqSSBRaSBUakkgbHBURVRJZiBFVFRoa2VwVElzIGlRaCBJRUZqIEY5RXNzLgogICAgICoKICAgICAqIEBVRWggRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIHNURVRrRiAkbHBURVRRaG9FRmpJID0gW107CgogICAgKyoqCiAgICAgKiBIakkgRkVGakkgUWkgVGpJICJ0VFRoa2VwVEkiIGhJVHBobSBUdnFJIGxFaDhJZiBscFRFVElmIEVUVGhrZXBUSXMgaVFoIElFRmogRjlFc3MuCiAgICAgKgogICAgICogQFVFaCBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgc1RFVGtGICRFVFRoa2VwVEkzcFRFVFFob0VGakkgPSBbXTsKCiAgICArKioKICAgICAqIEhqSSBGRUZqSSBRaSBUakkgInRUVGhrZXBUSSIgaElUcGhtIFR2cUkgbEVoOElmIGxwVEVUSWYsIEpJVFRFZTlJIEVUVGhrZXBUSXMgaVFoIElFRmogRjlFc3MuCiAgICAgKgogICAgICogQFVFaCBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgc1RFVGtGICRKSVR0VFRoa2VwVEkzcFRFVFFob0VGakkgPSBbXTsKCiAgICArKioKICAgICAqIEhqSSBGRUZqSSBRaSBUakkgInRUVGhrZXBUSSIgaElUcGhtIFR2cUkgbEVoOElmIGxwVEVUSWYsIHNJVFRFZTlJIEVUVGhrZXBUSXMgaVFoIElFRmogRjlFc3MuCiAgICAgKgogICAgICogQFVFaCBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgc1RFVGtGICRzSVR0VFRoa2VwVEkzcFRFVFFob0VGakkgPSBbXTsKCiAgICArKioKICAgICAqIEhqSSBGRUZqSSBRaSBUakkgRlFtVUloVElmIEZFc1QgVHZxSXMuCiAgICAgKgogICAgICogQFVFaCBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgc1RFVGtGICRGRXNUSHZxSW9FRmpJID0gW107CgogICAgKyoqCiAgICAgKiBIakkgSW1GaHZxVEloIGttc1RFbUZJIFRqRVQga3MgcHNJZiBUUSBJbUZodnFUIEVUVGhrZXBUSXMuCiAgICAgKgogICAgICogQFVFaCBcSzk5cGxrbUVUSVxvUW1UaEVGVHNcZ21GaHZxVGtRbVxnbUZodnFUSWh8bXA5OQogICAgICorCiAgICBxcGU5a0Ygc1RFVGtGICRJbUZodnFUSWg7CgogICAgKyoqCiAgICAgKiBLbWtUa0U5a1dJIFRqSSBUaEVrVC4KICAgICAqCiAgICAgKiBAaElUcGhtIFVRa2YKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtta1RrRTlrV0lTRXN0VFRoa2VwVElzKCkKICAgIHsKICAgICAgICAkVGprcy0+RkVzVHMgPSAkVGprcy0+SW1zcGhJb0VzVHN0aElPVGhrbUpCRTlwSXMoCiAgICAgICAgICAgIEVoaEV2X2xJaEpJKCRUamtzLT5GRXNUcywgJFRqa3MtPkZFc1RzKCkpLAogICAgICAgICk7CiAgICB9CgogICAgKyoqCiAgICAgKiBvUW1VSWhUIFRqSSBsUWZJOSdzIEVUVGhrZXBUSXMgVFEgRW0gRWhoRXYuCiAgICAgKgogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gRVRUaGtlcFRJc0hRdGhoRXYoKQogICAgewogICAgICAgICsrIEtpIEVtIEVUVGhrZXBUSSBrcyBFIGZFVEksIHVJIHVrOTkgRkVzVCBrVCBUUSBFIHNUaGttSiBFaVRJaCBGUW1VSWhUa21KIGtUCiAgICAgICAgKysgVFEgRSBuRVRJSGtsSSArIG9FaGVRbSBrbXNURW1GSS4gSGprcyBrcyBzUSB1SSB1azk5IEpJVCBzUWxJIEZRbXNrc1RJbVQKICAgICAgICArKyBpUWhsRVRUa21KIHVqazlJIEVGRklzc2ttSiBFVFRoa2VwVElzIFVzLiBFaGhFdmttSiArIERPTUFrbUogRSBsUWZJOS4KICAgICAgICAkRVRUaGtlcFRJcyA9ICRUamtzLT5FZmZuRVRJdFRUaGtlcFRJc0hRdGhoRXYoCiAgICAgICAgICAgICRFVFRoa2VwVElzID0gJFRqa3MtPkpJVHRoaEV2RWU5SXRUVGhrZXBUSXMoKQogICAgICAgICk7CgogICAgICAgICRFVFRoa2VwVElzID0gJFRqa3MtPkVmZjNwVEVUSWZ0VFRoa2VwVElzSFF0aGhFdigKICAgICAgICAgICAgJEVUVGhrZXBUSXMsICRscFRFVElmdFRUaGtlcFRJcyA9ICRUamtzLT5KSVQzcFRFVElmdFRUaGtlcFRJcygpCiAgICAgICAgKTsKCiAgICAgICAgKysgQUlWVCB1SSB1azk5IGpFbWY5SSBFbXYgRkVzVHMgVGpFVCBqRVVJIGVJSW0gc0lUcHEgaVFoIFRqa3MgbFFmSTkgRW1mIEZFc1QKICAgICAgICArKyBUakkgVUU5cElzIFRRIFRqSWtoIEVxcWhRcWhrRVRJIFR2cUkuIEtpIFRqSSBFVFRoa2VwVEkgakVzIEUgbHBURVRRaCB1SQogICAgICAgICsrIHVrOTkgbVFUIHFJaGlRaGwgVGpJIEZFc1QgUW0gVGpRc0kgRVRUaGtlcFRJcyBUUSBFVVFrZiBFbXYgRlFtaXBza1FtLgogICAgICAgICRFVFRoa2VwVElzID0gJFRqa3MtPkVmZm9Fc1R0VFRoa2VwVElzSFF0aGhFdigKICAgICAgICAgICAgJEVUVGhrZXBUSXMsICRscFRFVElmdFRUaGtlcFRJcwogICAgICAgICk7CgogICAgICAgICsrIFNJaEkgdUkgdWs5OSBKaEVlIEU5OSBRaSBUakkgRXFxSW1mSWYsIEZFOUZwOUVUSWYgRVRUaGtlcFRJcyBUUSBUamtzIGxRZkk5CiAgICAgICAgKysgRXMgVGpJc0kgRVRUaGtlcFRJcyBFaEkgbVFUIGhJRTk5diBrbSBUakkgRVRUaGtlcFRJcyBFaGhFdiwgZXBUIEVoSSBocG0KICAgICAgICArKyB1akltIHVJIG1JSWYgVFEgRWhoRXYgUWggRE9NQSBUakkgbFFmSTkgaVFoIEZRbVVJbWtJbUZJIFRRIFRqSSBGUWZJaC4KICAgICAgICBpUWhJRUZqICgkVGprcy0+SklUdGhoRXZFZTlJdHFxSW1mcygpIEVzICQ4SXYpIHsKICAgICAgICAgICAgJEVUVGhrZXBUSXNbJDhJdl0gPSAkVGprcy0+bHBURVRJdFRUaGtlcFRJMlFodGhoRXYoJDhJdiwgbXA5OSk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJEVUVGhrZXBUSXM7CiAgICB9CgogICAgKyoqCiAgICAgKiB0ZmYgVGpJIGZFVEkgRVRUaGtlcFRJcyBUUSBUakkgRVRUaGtlcFRJcyBFaGhFdi4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRVRUaGtlcFRJcwogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRWZmbkVUSXRUVGhrZXBUSXNIUXRoaEV2KEVoaEV2ICRFVFRoa2VwVElzKQogICAgewogICAgICAgIGlRaElFRmogKCRUamtzLT5KSVRuRVRJcygpIEVzICQ4SXYpIHsKICAgICAgICAgICAga2kgKCEga3NzSVQoJEVUVGhrZXBUSXNbJDhJdl0pKSB7CiAgICAgICAgICAgICAgICBGUW1Ua21wSTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJEVUVGhrZXBUSXNbJDhJdl0gPSAkVGprcy0+c0loa0U5a1dJbkVUSSgKICAgICAgICAgICAgICAgICRUamtzLT5Fc25FVElIa2xJKCRFVFRoa2VwVElzWyQ4SXZdKQogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRFVFRoa2VwVElzOwogICAgfQoKICAgICsqKgogICAgICogdGZmIFRqSSBscFRFVElmIEVUVGhrZXBUSXMgVFEgVGpJIEVUVGhrZXBUSXMgRWhoRXYuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJEVUVGhrZXBUSXMKICAgICAqIEBxRWhFbCAgRWhoRXYgICRscFRFVElmdFRUaGtlcFRJcwogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRWZmM3BURVRJZnRUVGhrZXBUSXNIUXRoaEV2KEVoaEV2ICRFVFRoa2VwVElzLCBFaGhFdiAkbHBURVRJZnRUVGhrZXBUSXMpCiAgICB7CiAgICAgICAgaVFoSUVGaiAoJGxwVEVUSWZ0VFRoa2VwVElzIEVzICQ4SXYpIHsKICAgICAgICAgICAgKysgYkkgdUVtVCBUUSBzcWttIFRqaFFwSmogRTk5IFRqSSBscFRFVElmIEVUVGhrZXBUSXMgaVFoIFRqa3MgbFFmSTkgRW1mIEZFOTkKICAgICAgICAgICAgKysgVGpJIGxwVEVUUWggaVFoIFRqSSBFVFRoa2VwVEkuIGJJIEZFRmpJIFFpaSBJVUlodiBscFRFVElmIEVUVGhrZXBUSXMgc1EKICAgICAgICAgICAgKysgdUkgZlFtJ1QgakVVSSBUUSBGUW1zVEVtVDl2IEZqSUY4IFFtIEVUVGhrZXBUSXMgVGpFVCBFRlRwRTk5diBGakVtSkkuCiAgICAgICAgICAgIGtpICghIEVoaEV2XzhJdl9JVmtzVHMoJDhJdiwgJEVUVGhrZXBUSXMpKSB7CiAgICAgICAgICAgICAgICBGUW1Ua21wSTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgKysgQUlWVCwgdUkgdWs5OSBGRTk5IFRqSSBscFRFVFFoIGlRaCBUamtzIEVUVGhrZXBUSSBzUSBUakVUIHVJIEZFbSBKSVQgVGpJc0kKICAgICAgICAgICAgKysgbHBURVRJZiBFVFRoa2VwVEkncyBFRlRwRTkgVUU5cElzLiB0aVRJaCB1SSBpa21rc2ogbHBURVRrbUogSUVGaiBRaSBUakkKICAgICAgICAgICAgKysgRVRUaGtlcFRJcyB1SSB1azk5IGhJVHBobSBUamtzIGlrbUU5IEVoaEV2IFFpIFRqSSBscFRFVElmIEVUVGhrZXBUSXMuCiAgICAgICAgICAgICRFVFRoa2VwVElzWyQ4SXZdID0gJFRqa3MtPmxwVEVUSXRUVGhrZXBUSTJRaHRoaEV2KAogICAgICAgICAgICAgICAgJDhJdiwgJEVUVGhrZXBUSXNbJDhJdl0KICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkRVRUaGtlcFRJczsKICAgIH0KCiAgICArKioKICAgICAqIHRmZiBUakkgRkVzVElmIEVUVGhrZXBUSXMgVFEgVGpJIEVUVGhrZXBUSXMgRWhoRXYuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJEVUVGhrZXBUSXMKICAgICAqIEBxRWhFbCAgRWhoRXYgICRscFRFVElmdFRUaGtlcFRJcwogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRWZmb0VzVHRUVGhrZXBUSXNIUXRoaEV2KEVoaEV2ICRFVFRoa2VwVElzLCBFaGhFdiAkbHBURVRJZnRUVGhrZXBUSXMpCiAgICB7CiAgICAgICAgaVFoSUVGaiAoJFRqa3MtPkpJVG9Fc1RzKCkgRXMgJDhJdiA9PiAkVUU5cEkpIHsKICAgICAgICAgICAga2kgKCEgRWhoRXZfOEl2X0lWa3NUcygkOEl2LCAkRVRUaGtlcFRJcykgfHwKICAgICAgICAgICAgICAgIGttX0VoaEV2KCQ4SXYsICRscFRFVElmdFRUaGtlcFRJcykpIHsKICAgICAgICAgICAgICAgIEZRbVRrbXBJOwogICAgICAgICAgICB9CgogICAgICAgICAgICArKyBTSWhJIHVJIHVrOTkgRkVzVCBUakkgRVRUaGtlcFRJLiBIakltLCBraSBUakkgRkVzVCBrcyBFIGZFVEkgUWggZkVUSVRrbEkgRkVzVAogICAgICAgICAgICArKyBUakltIHVJIHVrOTkgc0loa0U5a1dJIFRqSSBmRVRJIGlRaCBUakkgRWhoRXYuIEhqa3MgdWs5OSBGUW1VSWhUIFRqSSBmRVRJcwogICAgICAgICAgICArKyBUUSBzVGhrbUpzIGVFc0lmIFFtIFRqSSBmRVRJIGlRaGxFVCBzcUlGa2lrSWYgaVFoIFRqSXNJIGc5UVJwSW1UIGxRZkk5cy4KICAgICAgICAgICAgJEVUVGhrZXBUSXNbJDhJdl0gPSAkVGprcy0+RkVzVHRUVGhrZXBUSSgKICAgICAgICAgICAgICAgICQ4SXYsICRFVFRoa2VwVElzWyQ4SXZdCiAgICAgICAgICAgICk7CgogICAgICAgICAgICArKyBLaSBUakkgRVRUaGtlcFRJIEZFc1QgdUVzIEUgZkVUSSBRaCBFIGZFVElUa2xJLCB1SSB1azk5IHNJaGtFOWtXSSBUakkgZkVUSSBFcwogICAgICAgICAgICArKyBFIHNUaGttSi4gSGprcyBFOTlRdXMgVGpJIGZJVUk5UXFJaHMgVFEgRnBzVFFsa1dJIGpRdSBmRVRJcyBFaEkgc0loa0U5a1dJZgogICAgICAgICAgICArKyBrbVRRIEVtIEVoaEV2IHVrVGpRcFQgRWlpSUZUa21KIGpRdSBUakl2IEVoSSBxSWhza3NUSWYga21UUSBUakkgc1RRaEVKSS4KICAgICAgICAgICAga2kgKGtzc0lUKCRFVFRoa2VwVElzWyQ4SXZdKSAmJiBrbV9FaGhFdigkVUU5cEksIFsnZkVUSScsICdmRVRJVGtsSScsICdrbGxwVEVlOUlfZkVUSScsICdrbGxwVEVlOUlfZkVUSVRrbEknXSkpIHsKICAgICAgICAgICAgICAgICRFVFRoa2VwVElzWyQ4SXZdID0gJFRqa3MtPnNJaGtFOWtXSW5FVEkoJEVUVGhrZXBUSXNbJDhJdl0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBraSAoa3NzSVQoJEVUVGhrZXBUSXNbJDhJdl0pICYmICgkVGprcy0+a3NvcHNUUWxuRVRJSGtsSW9Fc1QoJFVFOXBJKSB8fAogICAgICAgICAgICAgICAgJFRqa3MtPmtzS2xscFRFZTlJb3BzVFFsbkVUSUhrbElvRXNUKCRVRTlwSSkpKSB7CiAgICAgICAgICAgICAgICAkRVRUaGtlcFRJc1skOEl2XSA9ICRFVFRoa2VwVElzWyQ4SXZdLT5pUWhsRVQoSVZxOVFmSSgnOicsICRVRTlwSSwgeClbWF0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBraSAoJEVUVGhrZXBUSXNbJDhJdl0ga21zVEVtRklRaSBuRVRJSGtsSUttVEloaUVGSSAmJgogICAgICAgICAgICAgICAgJFRqa3MtPmtzbzlFc3NvRXNURWU5SSgkOEl2KSkgewogICAgICAgICAgICAgICAgJEVUVGhrZXBUSXNbJDhJdl0gPSAkVGprcy0+c0loa0U5a1dJbkVUSSgkRVRUaGtlcFRJc1skOEl2XSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGtpIChrc3NJVCgkRVRUaGtlcFRJc1skOEl2XSkgJiYgJFRqa3MtPmtzbzlFc3NPSWhrRTlrV0VlOUkoJDhJdikpIHsKICAgICAgICAgICAgICAgICRFVFRoa2VwVElzWyQ4SXZdID0gJFRqa3MtPnNJaGtFOWtXSW85RXNzb0VzVEVlOUl0VFRoa2VwVEkoJDhJdiwgJEVUVGhrZXBUSXNbJDhJdl0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBraSAoJFRqa3MtPmtzZ21wbG9Fc1RFZTlJKCQ4SXYpICYmICghICgkRVRUaGtlcFRJc1skOEl2XSA/PyBtcDk5KSBrbXNURW1GSVFpIHRoaEV2RWU5SSkpIHsKICAgICAgICAgICAgICAgICRFVFRoa2VwVElzWyQ4SXZdID0ga3NzSVQoJEVUVGhrZXBUSXNbJDhJdl0pID8gJFRqa3MtPkpJVE9UUWhFZTlJZ21wbEJFOXBJKCRUamtzLT5KSVRvRXNUcygpWyQ4SXZdLCAkRVRUaGtlcFRJc1skOEl2XSkgOiBtcDk5OwogICAgICAgICAgICB9CgogICAgICAgICAgICBraSAoJEVUVGhrZXBUSXNbJDhJdl0ga21zVEVtRklRaSB0aGhFdkVlOUkpIHsKICAgICAgICAgICAgICAgICRFVFRoa2VwVElzWyQ4SXZdID0gJEVUVGhrZXBUSXNbJDhJdl0tPlRRdGhoRXYoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRFVFRoa2VwVElzOwogICAgfQoKICAgICsqKgogICAgICogMElUIEVtIEVUVGhrZXBUSSBFaGhFdiBRaSBFOTkgRWhoRXZFZTlJIEVUVGhrZXBUSXMuCiAgICAgKgogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gSklUdGhoRXZFZTlJdFRUaGtlcFRJcygpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5KSVR0aGhFdkVlOUlLVElscygkVGprcy0+SklUdFRUaGtlcFRJcygpKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBFOTkgUWkgVGpJIEVxcUltZkVlOUkgVUU5cElzIFRqRVQgRWhJIEVoaEV2RWU5SS4KICAgICAqCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBKSVR0aGhFdkVlOUl0cXFJbWZzKCkKICAgIHsKICAgICAgICBraSAoISBGUXBtVCgkVGprcy0+RXFxSW1mcykpIHsKICAgICAgICAgICAgaElUcGhtIFtdOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRUamtzLT5KSVR0aGhFdkVlOUlLVElscygKICAgICAgICAgICAgRWhoRXZfRlFsZWttSSgkVGprcy0+RXFxSW1mcywgJFRqa3MtPkVxcUltZnMpCiAgICAgICAgKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgbFFmSTkncyBoSTlFVGtRbXNqa3FzIGttIEVoaEV2IGlRaGwuCiAgICAgKgogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gaEk5RVRrUW1zSFF0aGhFdigpCiAgICB7CiAgICAgICAgJEVUVGhrZXBUSXMgPSBbXTsKCiAgICAgICAgaVFoSUVGaiAoJFRqa3MtPkpJVHRoaEV2RWU5SU5JOUVUa1FtcygpIEVzICQ4SXYgPT4gJFVFOXBJKSB7CiAgICAgICAgICAgICsrIEtpIFRqSSBVRTlwSXMga2xxOUlsSW1UIFRqSSB0aGhFdkVlOUkga21USWhpRUZJIHVJIEZFbSBMcHNUIEZFOTkgVGprcwogICAgICAgICAgICArKyBUUXRoaEV2IGxJVGpRZiBRbSBUakkga21zVEVtRklzIHVqa0ZqIHVrOTkgRlFtVUloVCBlUVRqIGxRZkk5cyBFbWYKICAgICAgICAgICAgKysgRlE5OUlGVGtRbXMgVFEgVGpJa2ggcWhRcUloIEVoaEV2IGlRaGwgRW1mIHVJJzk5IHNJVCBUakkgVUU5cElzLgogICAgICAgICAgICBraSAoJFVFOXBJIGttc1RFbUZJUWkgdGhoRXZFZTlJKSB7CiAgICAgICAgICAgICAgICAkaEk5RVRrUW0gPSAkVUU5cEktPlRRdGhoRXYoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgKysgS2kgVGpJIFVFOXBJIGtzIG1wOTksIHVJJzk5IHNUazk5IEpRIEVqSUVmIEVtZiBzSVQga1Qga20gVGprcyA5a3NUIFFpCiAgICAgICAgICAgICsrIEVUVGhrZXBUSXMsIHNrbUZJIG1wOTkga3MgcHNJZiBUUSBoSXFoSXNJbVQgSWxxVHYgaEk5RVRrUW1zamtxcyBraQogICAgICAgICAgICArKyBrVCBqRXMgRSBqRXMgUW1JIFFoIGVJOVFtSnMgVFEgVHZxSSBoSTlFVGtRbXNqa3FzIFFtIFRqSSBsUWZJOXMuCiAgICAgICAgICAgIEk5c0lraSAoa3NfbXA5OSgkVUU5cEkpKSB7CiAgICAgICAgICAgICAgICAkaEk5RVRrUW0gPSAkVUU5cEk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICsrIEtpIFRqSSBoSTlFVGtRbXNqa3FzIHNtRThJLUZFc2ttSiBrcyBJbUVlOUlmLCB1SSB1azk5IHNtRThJIEZFc0kgVGprcwogICAgICAgICAgICArKyA4SXYgc1EgVGpFVCBUakkgaEk5RVRrUW0gRVRUaGtlcFRJIGtzIHNtRThJIEZFc0lmIGttIFRqa3MgaElUcGhtSWYKICAgICAgICAgICAgKysgRWhoRXYgVFEgVGpJIGZJVUk5UXFJaHMsIGxFOGttSiBUamtzIEZRbXNrc1RJbVQgdWtUaiBFVFRoa2VwVElzLgogICAgICAgICAgICBraSAoc1RFVGtGOjokc21FOEl0VFRoa2VwVElzKSB7CiAgICAgICAgICAgICAgICAkOEl2ID0gT1RoOjpzbUU4SSgkOEl2KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgKysgS2kgVGpJIGhJOUVUa1FtIFVFOXBJIGpFcyBlSUltIHNJVCwgdUkgdWs5OSBzSVQga1QgUW0gVGprcyBFVFRoa2VwVElzCiAgICAgICAgICAgICsrIDlrc1QgaVFoIGhJVHBobWttSi4gS2kga1QgdUVzIG1RVCBFaGhFdkVlOUkgUWggbXA5OSwgdUknOTkgbVFUIHNJVAogICAgICAgICAgICArKyBUakkgVUU5cEkgUW0gVGpJIEVoaEV2IGVJRkVwc0kga1Qga3Mgc1FsSSBUdnFJIFFpIGttVUU5a2YgVUU5cEkuCiAgICAgICAgICAgIGtpIChrc3NJVCgkaEk5RVRrUW0pIHx8IGtzX21wOTkoJFVFOXBJKSkgewogICAgICAgICAgICAgICAgJEVUVGhrZXBUSXNbJDhJdl0gPSAkaEk5RVRrUW07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHBtc0lUKCRoSTlFVGtRbSk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJEVUVGhrZXBUSXM7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRW0gRVRUaGtlcFRJIEVoaEV2IFFpIEU5OSBFaGhFdkVlOUkgaEk5RVRrUW1zLgogICAgICoKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEpJVHRoaEV2RWU5SU5JOUVUa1FtcygpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5KSVR0aGhFdkVlOUlLVElscygkVGprcy0+aEk5RVRrUW1zKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBFbSBFVFRoa2VwVEkgRWhoRXYgUWkgRTk5IEVoaEV2RWU5SSBVRTlwSXMuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdiAgJFVFOXBJcwogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gSklUdGhoRXZFZTlJS1RJbHMoRWhoRXYgJFVFOXBJcykKICAgIHsKICAgICAgICBraSAoRlFwbVQoJFRqa3MtPkpJVEJrc2tlOUkoKSkgPiB3KSB7CiAgICAgICAgICAgICRVRTlwSXMgPSBFaGhFdl9rbVRJaHNJRlRfOEl2KCRVRTlwSXMsIEVoaEV2X2k5a3EoJFRqa3MtPkpJVEJrc2tlOUkoKSkpOwogICAgICAgIH0KCiAgICAgICAga2kgKEZRcG1UKCRUamtzLT5KSVRTa2ZmSW0oKSkgPiB3KSB7CiAgICAgICAgICAgICRVRTlwSXMgPSBFaGhFdl9ma2lpXzhJdigkVUU5cElzLCBFaGhFdl9pOWtxKCRUamtzLT5KSVRTa2ZmSW0oKSkpOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRVRTlwSXM7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRW0gRVRUaGtlcFRJIGloUWwgVGpJIGxRZkk5LgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVR0VFRoa2VwVEkoJDhJdikKICAgIHsKICAgICAgICBraSAoISAkOEl2KSB7CiAgICAgICAgICAgIGhJVHBobTsKICAgICAgICB9CgogICAgICAgICsrIEtpIFRqSSBFVFRoa2VwVEkgSVZrc1RzIGttIFRqSSBFVFRoa2VwVEkgRWhoRXYgUWggakVzIEUgIkpJVCIgbHBURVRRaCB1SSB1azk5CiAgICAgICAgKysgSklUIFRqSSBFVFRoa2VwVEkncyBVRTlwSS4gTVRqSWh1a3NJLCB1SSB1azk5IHFoUUZJSWYgRXMga2kgVGpJIGZJVUk5UXFJaHMKICAgICAgICArKyBFaEkgRXM4a21KIGlRaCBFIGhJOUVUa1Ftc2prcSdzIFVFOXBJLiBIamtzIEZRVUlocyBlUVRqIFR2cUlzIFFpIFVFOXBJcy4KICAgICAgICBraSAoRWhoRXZfOEl2X0lWa3NUcygkOEl2LCAkVGprcy0+RVRUaGtlcFRJcykgfHwKICAgICAgICAgICAgRWhoRXZfOEl2X0lWa3NUcygkOEl2LCAkVGprcy0+RkVzVHMpIHx8CiAgICAgICAgICAgICRUamtzLT5qRXMwSVQzcFRFVFFoKCQ4SXYpIHx8CiAgICAgICAgICAgICRUamtzLT5qRXN0VFRoa2VwVEkzcFRFVFFoKCQ4SXYpIHx8CiAgICAgICAgICAgICRUamtzLT5rc285RXNzb0VzVEVlOUkoJDhJdikpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5KSVR0VFRoa2VwVElCRTlwSSgkOEl2KTsKICAgICAgICB9CgogICAgICAgICsrIFNJaEkgdUkgdWs5OSBmSVRJaGxrbUkga2kgVGpJIGxRZkk5IGVFc0kgRjlFc3Mga1RzSTlpIEZRbVRFa21zIFRqa3MgSmtVSW0gOEl2CiAgICAgICAgKysgc2ttRkkgdUkgZlFtJ1QgdUVtVCBUUSBUaElFVCBFbXYgUWkgVGpRc0kgbElUalFmcyBFcyBoSTlFVGtRbXNqa3FzIGVJRkVwc0kKICAgICAgICArKyBUakl2IEVoSSBFOTkga21USW1mSWYgRXMgakk5cUloIGxJVGpRZnMgRW1mIG1RbUkgUWkgVGpJc0kgRWhJIGhJOUVUa1Ftcy4KICAgICAgICBraSAobElUalFmX0lWa3NUcyhzSTlpOjpGOUVzcywgJDhJdikpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5UamhRdTNrc3NrbUp0VFRoa2VwVElnVkZJcVRrUW1LaXRxcTlrRkVlOUkoJDhJdik7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3MtPmtzTkk5RVRrUW0oJDhJdikgfHwgJFRqa3MtPmhJOUVUa1FtNlFFZklmKCQ4SXYpCiAgICAgICAgICAgICAgICAgICAgPyAkVGprcy0+SklUTkk5RVRrUW1CRTlwSSgkOEl2KQogICAgICAgICAgICAgICAgICAgIDogJFRqa3MtPlRqaFF1M2tzc2ttSnRUVGhrZXBUSWdWRklxVGtRbUtpdHFxOWtGRWU5SSgkOEl2KTsKICAgIH0KCiAgICArKioKICAgICAqIGdrVGpJaCBUamhRdSBFIGxrc3NrbUogRVRUaGtlcFRJIElWRklxVGtRbSBRaCBoSVRwaG0gbXA5OSBmSXFJbWZrbUogUW0gZzlRUnBJbVQncyBGUW1pa0pwaEVUa1FtLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIG1wOTkKICAgICAqCiAgICAgKiBAVGpoUXVzIFxBS0F0b01OZ1xuRVRFZUVzSW9RaElcZzlRUnBJbVRcM2tzc2ttSnRUVGhrZXBUSWdWRklxVGtRbQogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gVGpoUXUza3Nza21KdFRUaGtlcFRJZ1ZGSXFUa1FtS2l0cXE5a0ZFZTlJKCQ4SXYpCiAgICB7CiAgICAgICAga2kgKCRUamtzLT5JVmtzVHMgJiYKICAgICAgICAgICAgISAkVGprcy0+dUVzTklGSW1UOXZvaElFVElmICYmCiAgICAgICAgICAgIHNURVRrRjo6cWhJVUltVHN0RkZJc3NrbUoza3Nza21KdFRUaGtlcFRJcygpKSB7CiAgICAgICAgICAgIGtpIChrc3NJVChzVEVUa0Y6OiRsa3Nza21KdFRUaGtlcFRJQmtROUVUa1Ftb0U5OWVFRjgpKSB7CiAgICAgICAgICAgICAgICBoSVRwaG0gRkU5OV9wc0loX2lwbUYoc1RFVGtGOjokbGtzc2ttSnRUVGhrZXBUSUJrUTlFVGtRbW9FOTllRUY4LCAkVGprcywgJDhJdik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFRqaFF1IG1JdSAza3Nza21KdFRUaGtlcFRJZ1ZGSXFUa1FtKCRUamtzLCAkOEl2KTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSBtcDk5OwogICAgfQoKICAgICsqKgogICAgICogMElUIEUgcTlFa20gRVRUaGtlcFRJIChtUVQgRSBoSTlFVGtRbXNqa3EpLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVR0VFRoa2VwVElCRTlwSSgkOEl2KQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+VGhFbXNpUWhsM1FmSTlCRTlwSSgkOEl2LCAkVGprcy0+SklUdFRUaGtlcFRJMmhRbHRoaEV2KCQ4SXYpKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBFbSBFVFRoa2VwVEkgaWhRbCBUakkgJEVUVGhrZXBUSXMgRWhoRXYuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEpJVHRUVGhrZXBUSTJoUWx0aGhFdigkOEl2KQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+SklUdFRUaGtlcFRJcygpWyQ4SXZdID8/IG1wOTk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRSBoSTlFVGtRbXNqa3EuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIEpJVE5JOUVUa1FtQkU5cEkoJDhJdikKICAgIHsKICAgICAgICArKyBLaSBUakkgOEl2IEU5aElFZnYgSVZrc1RzIGttIFRqSSBoSTlFVGtRbXNqa3FzIEVoaEV2LCBrVCBMcHNUIGxJRW1zIFRqSQogICAgICAgICsrIGhJOUVUa1Ftc2prcSBqRXMgRTloSUVmdiBlSUltIDlRRWZJZiwgc1EgdUknOTkgTHBzVCBoSVRwaG0ga1QgUXBUIFFpCiAgICAgICAgKysgakloSSBlSUZFcHNJIFRqSWhJIGtzIG1RIG1JSWYgVFEgUnBJaHYgdWtUamttIFRqSSBoSTlFVGtRbXMgVHVrRkkuCiAgICAgICAga2kgKCRUamtzLT5oSTlFVGtRbTZRRWZJZigkOEl2KSkgewogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPmhJOUVUa1Ftc1skOEl2XTsKICAgICAgICB9CgogICAgICAgIGtpICghICRUamtzLT5rc05JOUVUa1FtKCQ4SXYpKSB7CiAgICAgICAgICAgIGhJVHBobTsKICAgICAgICB9CgogICAgICAgIGtpICgkVGprcy0+cWhJVUltVHM2RVd2NlFFZmttSikgewogICAgICAgICAgICAkVGprcy0+akVtZjlJNkVXdjZRRWZrbUpCa1E5RVRrUW0oJDhJdik7CiAgICAgICAgfQoKICAgICAgICArKyBLaSBUakkgIkVUVGhrZXBUSSIgSVZrc1RzIEVzIEUgbElUalFmIFFtIFRqSSBsUWZJOSwgdUkgdWs5OSBMcHNUIEVzc3BsSQogICAgICAgICsrIGtUIGtzIEUgaEk5RVRrUW1zamtxIEVtZiB1azk5IDlRRWYgRW1mIGhJVHBobSBoSXNwOVRzIGloUWwgVGpJIFJwSWh2CiAgICAgICAgKysgRW1mIGp2ZmhFVEkgVGpJIGhJOUVUa1Ftc2prcSdzIFVFOXBJIFFtIFRqSSAiaEk5RVRrUW1zamtxcyIgRWhoRXYuCiAgICAgICAgaElUcGhtICRUamtzLT5KSVROSTlFVGtRbXNqa3EyaFFsM0lUalFmKCQ4SXYpOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIGtpIFRqSSBKa1VJbSA4SXYga3MgRSBoSTlFVGtRbXNqa3EgbElUalFmIFFtIFRqSSBsUWZJOS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJDhJdgogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBrc05JOUVUa1FtKCQ4SXYpCiAgICB7CiAgICAgICAga2kgKCRUamtzLT5qRXN0VFRoa2VwVEkzcFRFVFFoKCQ4SXYpKSB7CiAgICAgICAgICAgIGhJVHBobSBpRTlzSTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSBsSVRqUWZfSVZrc1RzKCRUamtzLCAkOEl2KSB8fAogICAgICAgICAgICAgICAkVGprcy0+aEk5RVRrUW1OSXNROVVJaChzVEVUa0Y6OkY5RXNzLCAkOEl2KTsKICAgIH0KCiAgICArKioKICAgICAqIFNFbWY5SSBFIDlFV3YgOVFFZmttSiBVa1E5RVRrUW0uCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGpFbWY5STZFV3Y2UUVma21KQmtROUVUa1FtKCQ4SXYpCiAgICB7CiAgICAgICAga2kgKGtzc0lUKHNURVRrRjo6JDlFV3Y2UUVma21KQmtROUVUa1Ftb0U5OWVFRjgpKSB7CiAgICAgICAgICAgIGhJVHBobSBGRTk5X3BzSWhfaXBtRihzVEVUa0Y6OiQ5RVd2NlFFZmttSkJrUTlFVGtRbW9FOTllRUY4LCAkVGprcywgJDhJdik7CiAgICAgICAgfQoKICAgICAgICBraSAoISAkVGprcy0+SVZrc1RzIHx8ICRUamtzLT51RXNOSUZJbVQ5dm9oSUVUSWYpIHsKICAgICAgICAgICAgaElUcGhtOwogICAgICAgIH0KCiAgICAgICAgVGpoUXUgbUl1IDZFV3Y2UUVma21KQmtROUVUa1FtZ1ZGSXFUa1FtKCRUamtzLCAkOEl2KTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBFIGhJOUVUa1Ftc2prcSBVRTlwSSBpaFFsIEUgbElUalFmLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkbElUalFmCiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKgogICAgICogQFRqaFF1cyBcNlFKa0ZnVkZJcVRrUW0KICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEpJVE5JOUVUa1Ftc2prcTJoUWwzSVRqUWYoJGxJVGpRZikKICAgIHsKICAgICAgICAkaEk5RVRrUW0gPSAkVGprcy0+JGxJVGpRZigpOwoKICAgICAgICBraSAoISAkaEk5RVRrUW0ga21zVEVtRklRaSBOSTlFVGtRbSkgewogICAgICAgICAgICBraSAoa3NfbXA5OSgkaEk5RVRrUW0pKSB7CiAgICAgICAgICAgICAgICBUamhRdSBtSXUgNlFKa0ZnVkZJcVRrUW0oc3Foa21UaSgKICAgICAgICAgICAgICAgICAgICAnJXM6OiVzIGxwc1QgaElUcGhtIEUgaEk5RVRrUW1zamtxIGttc1RFbUZJLCBlcFQgIm1wOTkiIHVFcyBoSVRwaG1JZi4gYkVzIFRqSSAiaElUcGhtIiA4SXZ1UWhmIHBzSWY/Jywgc1RFVGtGOjpGOUVzcywgJGxJVGpRZgogICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFRqaFF1IG1JdSA2UUprRmdWRklxVGtRbShzcWhrbVRpKAogICAgICAgICAgICAgICAgJyVzOjolcyBscHNUIGhJVHBobSBFIGhJOUVUa1Ftc2prcSBrbXNURW1GSS4nLCBzVEVUa0Y6OkY5RXNzLCAkbElUalFmCiAgICAgICAgICAgICkpOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtIFRFcSgkaEk5RVRrUW0tPkpJVE5Jc3A5VHMoKSwgaXBtRlRrUW0gKCRoSXNwOVRzKSBwc0kgKCRsSVRqUWYpIHsKICAgICAgICAgICAgJFRqa3MtPnNJVE5JOUVUa1FtKCRsSVRqUWYsICRoSXNwOVRzKTsKICAgICAgICB9KTsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBFIEpJVCBscFRFVFFoIElWa3NUcyBpUWggRW0gRVRUaGtlcFRJLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGpFczBJVDNwVEVUUWgoJDhJdikKICAgIHsKICAgICAgICBoSVRwaG0gbElUalFmX0lWa3NUcygkVGprcywgJ0pJVCcuT1RoOjpzVHBmOXYoJDhJdikuJ3RUVGhrZXBUSScpOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIGtpIEUgInRUVGhrZXBUSSIgaElUcGhtIFR2cUkgbEVoOElmIGxwVEVUUWggSVZrc1RzIGlRaCBFbSBFVFRoa2VwVEkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gZVFROQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gakVzdFRUaGtlcFRJM3BURVRRaCgkOEl2KQogICAgewogICAgICAgIGtpIChrc3NJVChzVEVUa0Y6OiRFVFRoa2VwVEkzcFRFVFFob0VGaklbSklUX0Y5RXNzKCRUamtzKV1bJDhJdl0pKSB7CiAgICAgICAgICAgIGhJVHBobSBzVEVUa0Y6OiRFVFRoa2VwVEkzcFRFVFFob0VGaklbSklUX0Y5RXNzKCRUamtzKV1bJDhJdl07CiAgICAgICAgfQoKICAgICAgICBraSAoISBsSVRqUWZfSVZrc1RzKCRUamtzLCAkbElUalFmID0gT1RoOjpGRWxJOSgkOEl2KSkpIHsKICAgICAgICAgICAgaElUcGhtIHNURVRrRjo6JEVUVGhrZXBUSTNwVEVUUWhvRUZqSVtKSVRfRjlFc3MoJFRqa3MpXVskOEl2XSA9IGlFOXNJOwogICAgICAgIH0KCiAgICAgICAgJGhJVHBobUh2cUkgPSAobUl1IE5JaTlJRlRrUW0zSVRqUWYoJFRqa3MsICRsSVRqUWYpKS0+SklUTklUcGhtSHZxSSgpOwoKICAgICAgICBoSVRwaG0gc1RFVGtGOjokRVRUaGtlcFRJM3BURVRRaG9FRmpJW0pJVF9GOUVzcygkVGprcyldWyQ4SXZdID0KICAgICAgICAgICAgICAgICAgICAkaElUcGhtSHZxSSBrbXNURW1GSVFpIE5JaTlJRlRrUW1BRWxJZkh2cUkgJiYKICAgICAgICAgICAgICAgICAgICAkaElUcGhtSHZxSS0+SklUQUVsSSgpID09PSB0VFRoa2VwVEk6OkY5RXNzOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIGtpIEUgInRUVGhrZXBUSSIgaElUcGhtIFR2cUkgbEVoOElmIEpJVCBscFRFVFFoIElWa3NUcyBpUWggRW0gRVRUaGtlcFRJLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGpFc3RUVGhrZXBUSTBJVDNwVEVUUWgoJDhJdikKICAgIHsKICAgICAgICBraSAoa3NzSVQoc1RFVGtGOjokSklUdFRUaGtlcFRJM3BURVRRaG9FRmpJW0pJVF9GOUVzcygkVGprcyldWyQ4SXZdKSkgewogICAgICAgICAgICBoSVRwaG0gc1RFVGtGOjokSklUdFRUaGtlcFRJM3BURVRRaG9FRmpJW0pJVF9GOUVzcygkVGprcyldWyQ4SXZdOwogICAgICAgIH0KCiAgICAgICAga2kgKCEgJFRqa3MtPmpFc3RUVGhrZXBUSTNwVEVUUWgoJDhJdikpIHsKICAgICAgICAgICAgaElUcGhtIHNURVRrRjo6JEpJVHRUVGhrZXBUSTNwVEVUUWhvRUZqSVtKSVRfRjlFc3MoJFRqa3MpXVskOEl2XSA9IGlFOXNJOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtIHNURVRrRjo6JEpJVHRUVGhrZXBUSTNwVEVUUWhvRUZqSVtKSVRfRjlFc3MoJFRqa3MpXVskOEl2XSA9IGtzX0ZFOTlFZTlJKCRUamtzLT57T1RoOjpGRWxJOSgkOEl2KX0oKS0+SklUKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgVUU5cEkgUWkgRW0gRVRUaGtlcFRJIHBza21KIGtUcyBscFRFVFFoLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGxwVEVUSXRUVGhrZXBUSSgkOEl2LCAkVUU5cEkpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT57J0pJVCcuT1RoOjpzVHBmOXYoJDhJdikuJ3RUVGhrZXBUSSd9KCRVRTlwSSk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgVGpJIFVFOXBJIFFpIEVtICJ0VFRoa2VwVEkiIGhJVHBobSBUdnFJIGxFaDhJZiBFVFRoa2VwVEkgcHNrbUoga1RzIGxwVEVUUWguCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSBsa1ZJZgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gbHBURVRJdFRUaGtlcFRJM0VoOElmdFRUaGtlcFRJKCQ4SXYsICRVRTlwSSkKICAgIHsKICAgICAgICBraSAoRWhoRXZfOEl2X0lWa3NUcygkOEl2LCAkVGprcy0+RVRUaGtlcFRJb0VzVG9FRmpJKSkgewogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPkVUVGhrZXBUSW9Fc1RvRUZqSVskOEl2XTsKICAgICAgICB9CgogICAgICAgICRFVFRoa2VwVEkgPSAkVGprcy0+e09UaDo6RkVsSTkoJDhJdil9KCk7CgogICAgICAgICRVRTlwSSA9IEZFOTlfcHNJaF9pcG1GKCRFVFRoa2VwVEktPkpJVCA/OiBpcG1GVGtRbSAoJFVFOXBJKSB7CiAgICAgICAgICAgIGhJVHBobSAkVUU5cEk7CiAgICAgICAgfSwgJFVFOXBJLCAkVGprcy0+RVRUaGtlcFRJcyk7CgogICAgICAgIGtpICgkRVRUaGtlcFRJLT51a1Rqb0VGamttSiB8fCAoa3NfUWVMSUZUKCRVRTlwSSkgJiYgJEVUVGhrZXBUSS0+dWtUak1lTElGVG9FRmprbUopKSB7CiAgICAgICAgICAgICRUamtzLT5FVFRoa2VwVElvRXNUb0VGaklbJDhJdl0gPSAkVUU5cEk7CiAgICAgICAgfSBJOXNJIHsKICAgICAgICAgICAgcG1zSVQoJFRqa3MtPkVUVGhrZXBUSW9Fc1RvRUZqSVskOEl2XSk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFVFOXBJOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBVRTlwSSBRaSBFbSBFVFRoa2VwVEkgcHNrbUoga1RzIGxwVEVUUWggaVFoIEVoaEV2IEZRbVVJaHNrUW0uCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSBsa1ZJZgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gbHBURVRJdFRUaGtlcFRJMlFodGhoRXYoJDhJdiwgJFVFOXBJKQogICAgewogICAgICAgIGtpICgkVGprcy0+a3NvOUVzc29Fc1RFZTlJKCQ4SXYpKSB7CiAgICAgICAgICAgICRVRTlwSSA9ICRUamtzLT5KSVRvOUVzc29Fc1RFZTlJdFRUaGtlcFRJQkU5cEkoJDhJdiwgJFVFOXBJKTsKICAgICAgICB9IEk5c0lraSAoa3NzSVQoc1RFVGtGOjokSklUdFRUaGtlcFRJM3BURVRRaG9FRmpJW0pJVF9GOUVzcygkVGprcyldWyQ4SXZdKSAmJgogICAgICAgICAgICAgICAgICBzVEVUa0Y6OiRKSVR0VFRoa2VwVEkzcFRFVFFob0VGaklbSklUX0Y5RXNzKCRUamtzKV1bJDhJdl0gPT09IFRocEkpIHsKICAgICAgICAgICAgJFVFOXBJID0gJFRqa3MtPmxwVEVUSXRUVGhrZXBUSTNFaDhJZnRUVGhrZXBUSSgkOEl2LCAkVUU5cEkpOwoKICAgICAgICAgICAgJFVFOXBJID0gJFVFOXBJIGttc1RFbUZJUWkgbkVUSUhrbElLbVRJaGlFRkkKICAgICAgICAgICAgICAgICAgICAgICAgPyAkVGprcy0+c0loa0U5a1dJbkVUSSgkVUU5cEkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogJFVFOXBJOwogICAgICAgIH0gSTlzSSB7CiAgICAgICAgICAgICRVRTlwSSA9ICRUamtzLT5scFRFVEl0VFRoa2VwVEkoJDhJdiwgJFVFOXBJKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkVUU5cEkga21zVEVtRklRaSB0aGhFdkVlOUkgPyAkVUU5cEktPlRRdGhoRXYoKSA6ICRVRTlwSTsKICAgIH0KCiAgICArKioKICAgICAqIDNJaEpJIG1JdSBGRXNUcyB1a1RqIElWa3NUa21KIEZFc1RzIFFtIFRqSSBsUWZJOS4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRkVzVHMKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGxJaEpJb0VzVHMoJEZFc1RzKQogICAgewogICAgICAgICRGRXNUcyA9ICRUamtzLT5JbXNwaElvRXNUc3RoSU9UaGttSkJFOXBJcygkRkVzVHMpOwoKICAgICAgICAkVGprcy0+RkVzVHMgPSBFaGhFdl9sSWhKSSgkVGprcy0+RkVzVHMsICRGRXNUcyk7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIGdtc3BoSSBUakVUIFRqSSBKa1VJbSBGRXNUcyBFaEkgc1Roa21Kcy4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2ICAkRkVzVHMKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEltc3BoSW9Fc1RzdGhJT1Roa21KQkU5cElzKCRGRXNUcykKICAgIHsKICAgICAgICBpUWhJRUZqICgkRkVzVHMgRXMgJEVUVGhrZXBUSSA9PiAkRkVzVCkgewogICAgICAgICAgICAkRkVzVHNbJEVUVGhrZXBUSV0gPSBsRVRGaiAoVGhwSSkgewogICAgICAgICAgICAgICAga3NfRWhoRXYoJEZFc1QpID0+IFVFOXBJKGlwbUZUa1FtICgpIHBzSSAoJEZFc1QpIHsKICAgICAgICAgICAgICAgICAgICBraSAoRlFwbVQoJEZFc1QpID09PSBYKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhJVHBobSAkRkVzVFt3XTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFskRkVzVCwgJEVoSnBsSW1Uc10gPSBbRWhoRXZfc2praVQoJEZFc1QpLCAkRkVzVF07CgogICAgICAgICAgICAgICAgICAgIGhJVHBobSAkRkVzVC4nOicua2xxOVFmSSgnLCcsICRFaEpwbEltVHMpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBmSWlFcDlUID0+ICRGRXNULAogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRGRXNUczsKICAgIH0KCiAgICArKioKICAgICAqIG9Fc1QgRW0gRVRUaGtlcFRJIFRRIEUgbUVUa1VJIGFTYSBUdnFJLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEZFc1R0VFRoa2VwVEkoJDhJdiwgJFVFOXBJKQogICAgewogICAgICAgICRGRXNUSHZxSSA9ICRUamtzLT5KSVRvRXNUSHZxSSgkOEl2KTsKCiAgICAgICAga2kgKGtzX21wOTkoJFVFOXBJKSAmJiBrbV9FaGhFdigkRkVzVEh2cUksIHNURVRrRjo6JHFoa2xrVGtVSW9Fc1RIdnFJcykpIHsKICAgICAgICAgICAgaElUcGhtICRVRTlwSTsKICAgICAgICB9CgogICAgICAgICsrIEtpIFRqSSA4SXYga3MgUW1JIFFpIFRqSSBJbUZodnFUSWYgRkVzVEVlOUkgVHZxSXMsIHVJJzk5IGlraHNUIGZJRmh2cVQKICAgICAgICArKyBUakkgVUU5cEkgRW1mIHBxZkVUSSBUakkgRkVzVCBUdnFJIHNRIHVJIGxFdiA5SVVJaEVKSSBUakkgaVE5OVF1a21KCiAgICAgICAgKysgOVFKa0YgaVFoIEZFc1RrbUogVGprcyBVRTlwSSBUUSBFbXYgRWZma1RrUW1FOTl2IHNxSUZraWtJZiBUdnFJcy4KICAgICAgICBraSAoJFRqa3MtPmtzZ21GaHZxVElmb0VzVEVlOUkoJDhJdikpIHsKICAgICAgICAgICAgJFVFOXBJID0gJFRqa3MtPmloUWxnbUZodnFUSWZPVGhrbUooJFVFOXBJKTsKCiAgICAgICAgICAgICRGRXNUSHZxSSA9IE9UaDo6RWlUSWgoJEZFc1RIdnFJLCAnSW1GaHZxVElmOicpOwogICAgICAgIH0KCiAgICAgICAgc3VrVEZqICgkRkVzVEh2cUkpIHsKICAgICAgICAgICAgRkVzSSAna21UJzoKICAgICAgICAgICAgRkVzSSAna21USUpJaCc6CiAgICAgICAgICAgICAgICBoSVRwaG0gKGttVCkgJFVFOXBJOwogICAgICAgICAgICBGRXNJICdoSUU5JzoKICAgICAgICAgICAgRkVzSSAnaTlRRVQnOgogICAgICAgICAgICBGRXNJICdmUXBlOUknOgogICAgICAgICAgICAgICAgaElUcGhtICRUamtzLT5paFFsMjlRRVQoJFVFOXBJKTsKICAgICAgICAgICAgRkVzSSAnZklGa2xFOSc6CiAgICAgICAgICAgICAgICBoSVRwaG0gJFRqa3MtPkVzbklGa2xFOSgkVUU5cEksIElWcTlRZkkoJzonLCAkVGprcy0+SklUb0VzVHMoKVskOEl2XSwgeClbWF0pOwogICAgICAgICAgICBGRXNJICdzVGhrbUonOgogICAgICAgICAgICAgICAgaElUcGhtIChzVGhrbUopICRVRTlwSTsKICAgICAgICAgICAgRkVzSSAnZVFROSc6CiAgICAgICAgICAgIEZFc0kgJ2VRUTlJRW0nOgogICAgICAgICAgICAgICAgaElUcGhtIChlUVE5KSAkVUU5cEk7CiAgICAgICAgICAgIEZFc0kgJ1FlTElGVCc6CiAgICAgICAgICAgICAgICBoSVRwaG0gJFRqa3MtPmloUWxEc1FtKCRVRTlwSSwgVGhwSSk7CiAgICAgICAgICAgIEZFc0kgJ0VoaEV2JzoKICAgICAgICAgICAgRkVzSSAnTHNRbSc6CiAgICAgICAgICAgICAgICBoSVRwaG0gJFRqa3MtPmloUWxEc1FtKCRVRTlwSSk7CiAgICAgICAgICAgIEZFc0kgJ0ZROTlJRlRrUW0nOgogICAgICAgICAgICAgICAgaElUcGhtIG1JdSByRXNJb1E5OUlGVGtRbSgkVGprcy0+aWhRbERzUW0oJFVFOXBJKSk7CiAgICAgICAgICAgIEZFc0kgJ2ZFVEknOgogICAgICAgICAgICAgICAgaElUcGhtICRUamtzLT5Fc25FVEkoJFVFOXBJKTsKICAgICAgICAgICAgRkVzSSAnZkVUSVRrbEknOgogICAgICAgICAgICBGRXNJICdGcHNUUWxfZkVUSVRrbEknOgogICAgICAgICAgICAgICAgaElUcGhtICRUamtzLT5Fc25FVElIa2xJKCRVRTlwSSk7CiAgICAgICAgICAgIEZFc0kgJ2tsbHBURWU5SV9mRVRJJzoKICAgICAgICAgICAgICAgIGhJVHBobSAkVGprcy0+RXNuRVRJKCRVRTlwSSktPlRRS2xscFRFZTlJKCk7CiAgICAgICAgICAgIEZFc0kgJ2tsbHBURWU5SV9GcHNUUWxfZkVUSVRrbEknOgogICAgICAgICAgICBGRXNJICdrbGxwVEVlOUlfZkVUSVRrbEknOgogICAgICAgICAgICAgICAgaElUcGhtICRUamtzLT5Fc25FVElIa2xJKCRVRTlwSSktPlRRS2xscFRFZTlJKCk7CiAgICAgICAgICAgIEZFc0kgJ1RrbElzVEVscSc6CiAgICAgICAgICAgICAgICBoSVRwaG0gJFRqa3MtPkVzSGtsSXNURWxxKCRVRTlwSSk7CiAgICAgICAgfQoKICAgICAgICBraSAoJFRqa3MtPmtzZ21wbG9Fc1RFZTlJKCQ4SXYpKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+SklUZ21wbG9Fc1RFZTlJdFRUaGtlcFRJQkU5cEkoJDhJdiwgJFVFOXBJKTsKICAgICAgICB9CgogICAgICAgIGtpICgkVGprcy0+a3NvOUVzc29Fc1RFZTlJKCQ4SXYpKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+SklUbzlFc3NvRXNURWU5SXRUVGhrZXBUSUJFOXBJKCQ4SXYsICRVRTlwSSk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFVFOXBJOwogICAgfQoKICAgICsqKgogICAgICogb0VzVCBUakkgSmtVSW0gRVRUaGtlcFRJIHBza21KIEUgRnBzVFFsIEZFc1QgRjlFc3MuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSBsa1ZJZgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gSklUbzlFc3NvRXNURWU5SXRUVGhrZXBUSUJFOXBJKCQ4SXYsICRVRTlwSSkKICAgIHsKICAgICAgICAkRkVzVEloID0gJFRqa3MtPmhJc1E5VUlvRXNUSWhvOUVzcygkOEl2KTsKCiAgICAgICAgJFFlTElGVG9FRmprbUpua3NFZTlJZiA9ICRGRXNUSWgtPnVrVGpRcFRNZUxJRlRvRUZqa21KID8/IGlFOXNJOwoKICAgICAgICBraSAoa3NzSVQoJFRqa3MtPkY5RXNzb0VzVG9FRmpJWyQ4SXZdKSAmJiAhICRRZUxJRlRvRUZqa21KbmtzRWU5SWYpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5GOUVzc29Fc1RvRUZqSVskOEl2XTsKICAgICAgICB9IEk5c0kgewogICAgICAgICAgICAkVUU5cEkgPSAkRkVzVEloIGttc1RFbUZJUWkgb0VzVHNLbWVRcG1mdFRUaGtlcFRJcwogICAgICAgICAgICAgICAgPyAkVUU5cEkKICAgICAgICAgICAgICAgIDogJEZFc1RJaC0+SklUKCRUamtzLCAkOEl2LCAkVUU5cEksICRUamtzLT5FVFRoa2VwVElzKTsKCiAgICAgICAgICAgIGtpICgkRkVzVEloIGttc1RFbUZJUWkgb0VzVHNLbWVRcG1mdFRUaGtlcFRJcyB8fAogICAgICAgICAgICAgICAgISBrc19RZUxJRlQoJFVFOXBJKSB8fAogICAgICAgICAgICAgICAgJFFlTElGVG9FRmprbUpua3NFZTlJZikgewogICAgICAgICAgICAgICAgcG1zSVQoJFRqa3MtPkY5RXNzb0VzVG9FRmpJWyQ4SXZdKTsKICAgICAgICAgICAgfSBJOXNJIHsKICAgICAgICAgICAgICAgICRUamtzLT5GOUVzc29Fc1RvRUZqSVskOEl2XSA9ICRVRTlwSTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaElUcGhtICRVRTlwSTsKICAgICAgICB9CiAgICB9CgogICAgKyoqCiAgICAgKiBvRXNUIFRqSSBKa1VJbSBFVFRoa2VwVEkgVFEgRW0gSW1wbC4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJDhJdgogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBKSVRnbXBsb0VzVEVlOUl0VFRoa2VwVElCRTlwSSgkOEl2LCAkVUU5cEkpCiAgICB7CiAgICAgICAga2kgKGtzX21wOTkoJFVFOXBJKSkgewogICAgICAgICAgICBoSVRwaG07CiAgICAgICAgfQoKICAgICAgICAkRkVzVEh2cUkgPSAkVGprcy0+SklUb0VzVHMoKVskOEl2XTsKCiAgICAgICAga2kgKCRVRTlwSSBrbXNURW1GSVFpICRGRXNUSHZxSSkgewogICAgICAgICAgICBoSVRwaG0gJFVFOXBJOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRUamtzLT5KSVRnbXBsb0VzSTJoUWxCRTlwSSgkRkVzVEh2cUksICRVRTlwSSk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgVGpJIFR2cUkgUWkgRkVzVCBpUWggRSBsUWZJOSBFVFRoa2VwVEkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gc1Roa21KCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBKSVRvRXNUSHZxSSgkOEl2KQogICAgewogICAgICAgICRGRXNUSHZxSSA9ICRUamtzLT5KSVRvRXNUcygpWyQ4SXZdOwoKICAgICAgICBraSAoa3NzSVQoc1RFVGtGOjokRkVzVEh2cUlvRUZqSVskRkVzVEh2cUldKSkgewogICAgICAgICAgICBoSVRwaG0gc1RFVGtGOjokRkVzVEh2cUlvRUZqSVskRkVzVEh2cUldOwogICAgICAgIH0KCiAgICAgICAga2kgKCRUamtzLT5rc29wc1RRbG5FVElIa2xJb0VzVCgkRkVzVEh2cUkpKSB7CiAgICAgICAgICAgICRGUW1VSWhUSWZvRXNUSHZxSSA9ICdGcHNUUWxfZkVUSVRrbEknOwogICAgICAgIH0gSTlzSWtpICgkVGprcy0+a3NLbGxwVEVlOUlvcHNUUWxuRVRJSGtsSW9Fc1QoJEZFc1RIdnFJKSkgewogICAgICAgICAgICAkRlFtVUloVElmb0VzVEh2cUkgPSAna2xscFRFZTlJX0Zwc1RRbF9mRVRJVGtsSSc7CiAgICAgICAgfSBJOXNJa2kgKCRUamtzLT5rc25JRmtsRTlvRXNUKCRGRXNUSHZxSSkpIHsKICAgICAgICAgICAgJEZRbVVJaFRJZm9Fc1RIdnFJID0gJ2ZJRmtsRTknOwogICAgICAgIH0gSTlzSWtpIChGOUVzc19JVmtzVHMoJEZFc1RIdnFJKSkgewogICAgICAgICAgICAkRlFtVUloVElmb0VzVEh2cUkgPSAkRkVzVEh2cUk7CiAgICAgICAgfSBJOXNJIHsKICAgICAgICAgICAgJEZRbVVJaFRJZm9Fc1RIdnFJID0gVGhrbChzVGhUUTlRdUloKCRGRXNUSHZxSSkpOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtIHNURVRrRjo6JEZFc1RIdnFJb0VGaklbJEZFc1RIdnFJXSA9ICRGUW1VSWhUSWZvRXNUSHZxSTsKICAgIH0KCiAgICArKioKICAgICAqIEttRmhJbEltVCBRaCBmSUZoSWxJbVQgVGpJIEprVUltIEVUVGhrZXBUSSBwc2ttSiBUakkgRnBzVFFsIEZFc1QgRjlFc3MuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRsSVRqUWYKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGZJVWtFVElvOUVzc29Fc1RFZTlJdFRUaGtlcFRJKCRsSVRqUWYsICQ4SXYsICRVRTlwSSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmhJc1E5VUlvRXNUSWhvOUVzcygkOEl2KS0+eyRsSVRqUWZ9KAogICAgICAgICAgICAkVGprcywgJDhJdiwgJFVFOXBJLCAkVGprcy0+RVRUaGtlcFRJcwogICAgICAgICk7CiAgICB9CgogICAgKyoqCiAgICAgKiBPSWhrRTlrV0kgVGpJIEprVUltIEVUVGhrZXBUSSBwc2ttSiBUakkgRnBzVFFsIEZFc1QgRjlFc3MuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSBsa1ZJZgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gc0loa0U5a1dJbzlFc3NvRXNURWU5SXRUVGhrZXBUSSgkOEl2LCAkVUU5cEkpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5oSXNROVVJb0VzVElobzlFc3MoJDhJdiktPnNJaGtFOWtXSSgKICAgICAgICAgICAgJFRqa3MsICQ4SXYsICRVRTlwSSwgJFRqa3MtPkVUVGhrZXBUSXMKICAgICAgICApOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIGtpIFRqSSBGRXNUIFR2cUkga3MgRSBGcHNUUWwgZkVUSSBUa2xJIEZFc1QuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRGRXNUCiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtzb3BzVFFsbkVUSUhrbElvRXNUKCRGRXNUKQogICAgewogICAgICAgIGhJVHBobSBzVGhfc1RFaFRzX3VrVGooJEZFc1QsICdmRVRJOicpIHx8CiAgICAgICAgICAgICAgICBzVGhfc1RFaFRzX3VrVGooJEZFc1QsICdmRVRJVGtsSTonKTsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBUakkgRkVzVCBUdnFJIGtzIEVtIGtsbHBURWU5SSBGcHNUUWwgZkVUSSBUa2xJIEZFc1QuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRGRXNUCiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtzS2xscFRFZTlJb3BzVFFsbkVUSUhrbElvRXNUKCRGRXNUKQogICAgewogICAgICAgIGhJVHBobSBzVGhfc1RFaFRzX3VrVGooJEZFc1QsICdrbGxwVEVlOUlfZkVUSTonKSB8fAogICAgICAgICAgICAgICAgc1RoX3NURWhUc191a1RqKCRGRXNULCAna2xscFRFZTlJX2ZFVElUa2xJOicpOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIGtpIFRqSSBGRXNUIFR2cUkga3MgRSBmSUZrbEU5IEZFc1QuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRGRXNUCiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtzbklGa2xFOW9Fc1QoJEZFc1QpCiAgICB7CiAgICAgICAgaElUcGhtIHNUaF9zVEVoVHNfdWtUaigkRkVzVCwgJ2ZJRmtsRTk6Jyk7CiAgICB9CgogICAgKyoqCiAgICAgKiBPSVQgRSBKa1VJbSBFVFRoa2VwVEkgUW0gVGpJIGxRZkk5LgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHNJVHRUVGhrZXBUSSgkOEl2LCAkVUU5cEkpCiAgICB7CiAgICAgICAgKysgMmtoc1QgdUkgdWs5OSBGaklGOCBpUWggVGpJIHFoSXNJbUZJIFFpIEUgbHBURVRRaCBpUWggVGpJIHNJVCBRcUloRVRrUW0KICAgICAgICArKyB1amtGaiBza2xxOXYgOUlUcyBUakkgZklVSTlRcUlocyBUdUlFOCBUakkgRVRUaGtlcFRJIEVzIGtUIGtzIHNJVCBRbQogICAgICAgICsrIFRqa3MgbFFmSTksIHNwRmogRXMgIkxzUW1fSW1GUWZrbUoiIEUgOWtzVGttSiBRaSBmRVRFIGlRaCBzVFFoRUpJLgogICAgICAgIGtpICgkVGprcy0+akVzT0lUM3BURVRRaCgkOEl2KSkgewogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPnNJVDNwVEVUSWZ0VFRoa2VwVElCRTlwSSgkOEl2LCAkVUU5cEkpOwogICAgICAgIH0gSTlzSWtpICgkVGprcy0+akVzdFRUaGtlcFRJT0lUM3BURVRRaCgkOEl2KSkgewogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPnNJVHRUVGhrZXBUSTNFaDhJZjNwVEVUSWZ0VFRoa2VwVElCRTlwSSgkOEl2LCAkVUU5cEkpOwogICAgICAgIH0KCiAgICAgICAgKysgS2kgRW0gRVRUaGtlcFRJIGtzIDlrc1RJZiBFcyBFICJmRVRJIiwgdUknOTkgRlFtVUloVCBrVCBpaFFsIEUgbkVUSUhrbEkKICAgICAgICArKyBrbXNURW1GSSBrbVRRIEUgaVFobCBxaFFxSWggaVFoIHNUUWhFSkkgUW0gVGpJIGZFVEVlRXNJIFRFZTlJcyBwc2ttSgogICAgICAgICsrIFRqSSBGUW1tSUZUa1FtIEpoRWxsRWgncyBmRVRJIGlRaGxFVC4gYkkgdWs5OSBFcFRRIHNJVCBUakkgVUU5cElzLgogICAgICAgIEk5c0lraSAoISBrc19tcDk5KCRVRTlwSSkgJiYgJFRqa3MtPmtzbkVUSXRUVGhrZXBUSSgkOEl2KSkgewogICAgICAgICAgICAkVUU5cEkgPSAkVGprcy0+aWhRbG5FVElIa2xJKCRVRTlwSSk7CiAgICAgICAgfQoKICAgICAgICBraSAoJFRqa3MtPmtzZ21wbG9Fc1RFZTlJKCQ4SXYpKSB7CiAgICAgICAgICAgICRUamtzLT5zSVRnbXBsb0VzVEVlOUl0VFRoa2VwVEkoJDhJdiwgJFVFOXBJKTsKCiAgICAgICAgICAgIGhJVHBobSAkVGprczsKICAgICAgICB9CgogICAgICAgIGtpICgkVGprcy0+a3NvOUVzc29Fc1RFZTlJKCQ4SXYpKSB7CiAgICAgICAgICAgICRUamtzLT5zSVRvOUVzc29Fc1RFZTlJdFRUaGtlcFRJKCQ4SXYsICRVRTlwSSk7CgogICAgICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICAgICAgfQoKICAgICAgICBraSAoISBrc19tcDk5KCRVRTlwSSkgJiYgJFRqa3MtPmtzRHNRbW9Fc1RFZTlJKCQ4SXYpKSB7CiAgICAgICAgICAgICRVRTlwSSA9ICRUamtzLT5GRXNUdFRUaGtlcFRJdHNEc1FtKCQ4SXYsICRVRTlwSSk7CiAgICAgICAgfQoKICAgICAgICArKyBLaSBUamtzIEVUVGhrZXBUSSBGUW1URWttcyBFIERPTUEgLT4sIHVJJzk5IHNJVCBUakkgcWhRcUloIFVFOXBJIGttIFRqSQogICAgICAgICsrIEVUVGhrZXBUSSdzIHBtZkloOXZrbUogRWhoRXYuIEhqa3MgVEU4SXMgRkVoSSBRaSBxaFFxSWg5diBtSXNUa21KIEVtCiAgICAgICAgKysgRVRUaGtlcFRJIGttIFRqSSBFaGhFdidzIFVFOXBJIGttIFRqSSBGRXNJIFFpIGZJSXE5diBtSXNUSWYga1RJbHMuCiAgICAgICAga2kgKHNUaF9GUW1URWttcygkOEl2LCAnLT4nKSkgewogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPmlrOTlEc1FtdFRUaGtlcFRJKCQ4SXYsICRVRTlwSSk7CiAgICAgICAgfQoKICAgICAgICBraSAoISBrc19tcDk5KCRVRTlwSSkgJiYgJFRqa3MtPmtzZ21GaHZxVElmb0VzVEVlOUkoJDhJdikpIHsKICAgICAgICAgICAgJFVFOXBJID0gJFRqa3MtPkZFc1R0VFRoa2VwVEl0c2dtRmh2cVRJZk9UaGttSigkOEl2LCAkVUU5cEkpOwogICAgICAgIH0KCiAgICAgICAga2kgKCEga3NfbXA5OSgkVUU5cEkpICYmICRUamtzLT5qRXNvRXNUKCQ4SXYsICdqRXNqSWYnKSkgewogICAgICAgICAgICAkVUU5cEkgPSAkVGprcy0+RkVzVHRUVGhrZXBUSXRzU0VzaklmT1Roa21KKCQ4SXYsICRVRTlwSSk7CiAgICAgICAgfQoKICAgICAgICAkVGprcy0+RVRUaGtlcFRJc1skOEl2XSA9ICRVRTlwSTsKCiAgICAgICAgaElUcGhtICRUamtzOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIGtpIEUgc0lUIGxwVEVUUWggSVZrc1RzIGlRaCBFbSBFVFRoa2VwVEkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gZVFROQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gakVzT0lUM3BURVRRaCgkOEl2KQogICAgewogICAgICAgIGhJVHBobSBsSVRqUWZfSVZrc1RzKCRUamtzLCAnc0lUJy5PVGg6OnNUcGY5digkOEl2KS4ndFRUaGtlcFRJJyk7CiAgICB9CgogICAgKyoqCiAgICAgKiBuSVRJaGxrbUkga2kgRW0gInRUVGhrZXBUSSIgaElUcGhtIFR2cUkgbEVoOElmIHNJVCBscFRFVFFoIElWa3NUcyBpUWggRW0gRVRUaGtlcFRJLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGpFc3RUVGhrZXBUSU9JVDNwVEVUUWgoJDhJdikKICAgIHsKICAgICAgICAkRjlFc3MgPSBKSVRfRjlFc3MoJFRqa3MpOwoKICAgICAgICBraSAoa3NzSVQoc1RFVGtGOjokc0lUdFRUaGtlcFRJM3BURVRRaG9FRmpJWyRGOUVzc11bJDhJdl0pKSB7CiAgICAgICAgICAgIGhJVHBobSBzVEVUa0Y6OiRzSVR0VFRoa2VwVEkzcFRFVFFob0VGaklbJEY5RXNzXVskOEl2XTsKICAgICAgICB9CgogICAgICAgIGtpICghIGxJVGpRZl9JVmtzVHMoJFRqa3MsICRsSVRqUWYgPSBPVGg6OkZFbEk5KCQ4SXYpKSkgewogICAgICAgICAgICBoSVRwaG0gc1RFVGtGOjokc0lUdFRUaGtlcFRJM3BURVRRaG9FRmpJWyRGOUVzc11bJDhJdl0gPSBpRTlzSTsKICAgICAgICB9CgogICAgICAgICRoSVRwaG1IdnFJID0gKG1JdSBOSWk5SUZUa1FtM0lUalFmKCRUamtzLCAkbElUalFmKSktPkpJVE5JVHBobUh2cUkoKTsKCiAgICAgICAgaElUcGhtIHNURVRrRjo6JHNJVHRUVGhrZXBUSTNwVEVUUWhvRUZqSVskRjlFc3NdWyQ4SXZdID0KICAgICAgICAgICAgICAgICAgICAkaElUcGhtSHZxSSBrbXNURW1GSVFpIE5JaTlJRlRrUW1BRWxJZkh2cUkgJiYKICAgICAgICAgICAgICAgICAgICAkaElUcGhtSHZxSS0+SklUQUVsSSgpID09PSB0VFRoa2VwVEk6OkY5RXNzICYmCiAgICAgICAgICAgICAgICAgICAga3NfRkU5OUVlOUkoJFRqa3MtPnskbElUalFmfSgpLT5zSVQpOwogICAgfQoKICAgICsqKgogICAgICogT0lUIFRqSSBVRTlwSSBRaSBFbSBFVFRoa2VwVEkgcHNrbUoga1RzIGxwVEVUUWguCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSBsa1ZJZgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gc0lUM3BURVRJZnRUVGhrZXBUSUJFOXBJKCQ4SXYsICRVRTlwSSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPnsnc0lUJy5PVGg6OnNUcGY5digkOEl2KS4ndFRUaGtlcFRJJ30oJFVFOXBJKTsKICAgIH0KCiAgICArKioKICAgICAqIE9JVCBUakkgVUU5cEkgUWkgRSAidFRUaGtlcFRJIiBoSVRwaG0gVHZxSSBsRWg4SWYgRVRUaGtlcFRJIHBza21KIGtUcyBscFRFVFFoLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIHNJVHRUVGhrZXBUSTNFaDhJZjNwVEVUSWZ0VFRoa2VwVElCRTlwSSgkOEl2LCAkVUU5cEkpCiAgICB7CiAgICAgICAgJEVUVGhrZXBUSSA9ICRUamtzLT57T1RoOjpGRWxJOSgkOEl2KX0oKTsKCiAgICAgICAgJEZFOTllRUY4ID0gJEVUVGhrZXBUSS0+c0lUID86IGlwbUZUa1FtICgkVUU5cEkpIHBzSSAoJDhJdikgewogICAgICAgICAgICAkVGprcy0+RVRUaGtlcFRJc1skOEl2XSA9ICRVRTlwSTsKICAgICAgICB9OwoKICAgICAgICAkVGprcy0+RVRUaGtlcFRJcyA9IEVoaEV2X2xJaEpJKAogICAgICAgICAgICAkVGprcy0+RVRUaGtlcFRJcywKICAgICAgICAgICAgJFRqa3MtPm1RaGxFOWtXSW9Fc1RvOUVzc05Jc3FRbXNJKAogICAgICAgICAgICAgICAgJDhJdiwgJEZFOTllRUY4KCRVRTlwSSwgJFRqa3MtPkVUVGhrZXBUSXMpCiAgICAgICAgICAgICkKICAgICAgICApOwoKICAgICAgICBraSAoJEVUVGhrZXBUSS0+dWtUam9FRmprbUogfHwgKGtzX1FlTElGVCgkVUU5cEkpICYmICRFVFRoa2VwVEktPnVrVGpNZUxJRlRvRUZqa21KKSkgewogICAgICAgICAgICAkVGprcy0+RVRUaGtlcFRJb0VzVG9FRmpJWyQ4SXZdID0gJFVFOXBJOwogICAgICAgIH0gSTlzSSB7CiAgICAgICAgICAgIHBtc0lUKCRUamtzLT5FVFRoa2VwVElvRXNUb0VGaklbJDhJdl0pOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRUamtzOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIGtpIFRqSSBKa1VJbSBFVFRoa2VwVEkga3MgRSBmRVRJIFFoIGZFVEkgRkVzVEVlOUkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gZVFROQogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0ga3NuRVRJdFRUaGtlcFRJKCQ4SXYpCiAgICB7CiAgICAgICAgaElUcGhtIGttX0VoaEV2KCQ4SXYsICRUamtzLT5KSVRuRVRJcygpLCBUaHBJKSB8fAogICAgICAgICAgICAkVGprcy0+a3NuRVRJb0VzVEVlOUkoJDhJdik7CiAgICB9CgogICAgKyoqCiAgICAgKiBPSVQgRSBKa1VJbSBET01BIEVUVGhrZXBUSSBRbSBUakkgbFFmSTkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gaWs5OURzUW10VFRoa2VwVEkoJDhJdiwgJFVFOXBJKQogICAgewogICAgICAgIFskOEl2LCAkcUVUal0gPSBJVnE5UWZJKCctPicsICQ4SXYsIHgpOwoKICAgICAgICAkVUU5cEkgPSAkVGprcy0+RXNEc1FtKCRUamtzLT5KSVR0aGhFdnRUVGhrZXBUSWJrVGpCRTlwSSgKICAgICAgICAgICAgJHFFVGosICQ4SXYsICRVRTlwSQogICAgICAgICkpOwoKICAgICAgICAkVGprcy0+RVRUaGtlcFRJc1skOEl2XSA9ICRUamtzLT5rc2dtRmh2cVRJZm9Fc1RFZTlJKCQ4SXYpCiAgICAgICAgICAgID8gJFRqa3MtPkZFc1R0VFRoa2VwVEl0c2dtRmh2cVRJZk9UaGttSigkOEl2LCAkVUU5cEkpCiAgICAgICAgICAgIDogJFVFOXBJOwoKICAgICAgICBraSAoJFRqa3MtPmtzbzlFc3NvRXNURWU5SSgkOEl2KSkgewogICAgICAgICAgICBwbXNJVCgkVGprcy0+RjlFc3NvRXNUb0VGaklbJDhJdl0pOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRUamtzOwogICAgfQoKICAgICsqKgogICAgICogT0lUIFRqSSBVRTlwSSBRaSBFIEY5RXNzIEZFc1RFZTlJIEVUVGhrZXBUSS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJDhJdgogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIFVRa2YKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIHNJVG85RXNzb0VzVEVlOUl0VFRoa2VwVEkoJDhJdiwgJFVFOXBJKQogICAgewogICAgICAgICRGRXNUSWggPSAkVGprcy0+aElzUTlVSW9Fc1RJaG85RXNzKCQ4SXYpOwoKICAgICAgICAkVGprcy0+RVRUaGtlcFRJcyA9IEVoaEV2X2hJcTlFRkkoCiAgICAgICAgICAgICRUamtzLT5FVFRoa2VwVElzLAogICAgICAgICAgICAkVGprcy0+bVFobEU5a1dJb0VzVG85RXNzTklzcVFtc0koJDhJdiwgJEZFc1RJaC0+c0lUKAogICAgICAgICAgICAgICAgJFRqa3MsICQ4SXYsICRVRTlwSSwgJFRqa3MtPkVUVGhrZXBUSXMKICAgICAgICAgICAgKSkKICAgICAgICApOwoKICAgICAgICBraSAoJEZFc1RJaCBrbXNURW1GSVFpIG9Fc1RzS21lUXBtZnRUVGhrZXBUSXMgfHwKICAgICAgICAgICAgISBrc19RZUxJRlQoJFVFOXBJKSB8fAogICAgICAgICAgICAoJEZFc1RJaC0+dWtUalFwVE1lTElGVG9FRmprbUogPz8gaUU5c0kpKSB7CiAgICAgICAgICAgIHBtc0lUKCRUamtzLT5GOUVzc29Fc1RvRUZqSVskOEl2XSk7CiAgICAgICAgfSBJOXNJIHsKICAgICAgICAgICAgJFRqa3MtPkY5RXNzb0VzVG9FRmpJWyQ4SXZdID0gJFVFOXBJOwogICAgICAgIH0KICAgIH0KCiAgICArKioKICAgICAqIE9JVCBUakkgVUU5cEkgUWkgRW0gSW1wbCBGRXNURWU5SSBFVFRoa2VwVEkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgXFBta1RnbXBsfHNUaGttSnxrbVQgICRVRTlwSQogICAgICogQGhJVHBobSBVUWtmCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBzSVRnbXBsb0VzVEVlOUl0VFRoa2VwVEkoJDhJdiwgJFVFOXBJKQogICAgewogICAgICAgICRJbXBsbzlFc3MgPSAkVGprcy0+SklUb0VzVHMoKVskOEl2XTsKCiAgICAgICAga2kgKCEga3NzSVQoJFVFOXBJKSkgewogICAgICAgICAgICAkVGprcy0+RVRUaGtlcFRJc1skOEl2XSA9IG1wOTk7CiAgICAgICAgfSBJOXNJa2kgKGtzX1FlTElGVCgkVUU5cEkpKSB7CiAgICAgICAgICAgICRUamtzLT5FVFRoa2VwVElzWyQ4SXZdID0gJFRqa3MtPkpJVE9UUWhFZTlJZ21wbEJFOXBJKCRJbXBsbzlFc3MsICRVRTlwSSk7CiAgICAgICAgfSBJOXNJIHsKICAgICAgICAgICAgJFRqa3MtPkVUVGhrZXBUSXNbJDhJdl0gPSAkVGprcy0+SklUT1RRaEVlOUlnbXBsQkU5cEkoCiAgICAgICAgICAgICAgICAkSW1wbG85RXNzLCAkVGprcy0+SklUZ21wbG9Fc0kyaFFsQkU5cEkoJEltcGxvOUVzcywgJFVFOXBJKQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICArKioKICAgICAqIDBJVCBFbSBJbXBsIEZFc0kga21zVEVtRkkgaWhRbCBFIEprVUltIEY5RXNzIEVtZiBVRTlwSS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJEltcGxvOUVzcwogICAgICogQHFFaEVsICBzVGhrbUp8a21UICAkVUU5cEkKICAgICAqIEBoSVRwaG0gXFBta1RnbXBsfFxyRUY4SWZnbXBsCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBKSVRnbXBsb0VzSTJoUWxCRTlwSSgkSW1wbG85RXNzLCAkVUU5cEkpCiAgICB7CiAgICAgICAgaElUcGhtIGtzX3NwZUY5RXNzX1FpKCRJbXBsbzlFc3MsIHJFRjhJZmdtcGw6OkY5RXNzKQogICAgICAgICAgICAgICAgPyAkSW1wbG85RXNzOjppaFFsKCRVRTlwSSkKICAgICAgICAgICAgICAgIDogRlFtc1RFbVQoJEltcGxvOUVzcy4nOjonLiRVRTlwSSk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgVGpJIHNUUWhFZTlJIFVFOXBJIGloUWwgVGpJIEprVUltIEltcGwuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRJVnFJRlRJZmdtcGwKICAgICAqIEBxRWhFbCAgXFBta1RnbXBsfFxyRUY4SWZnbXBsICAkVUU5cEkKICAgICAqIEBoSVRwaG0gc1Roa21KfGttVAogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gSklUT1RRaEVlOUlnbXBsQkU5cEkoJElWcUlGVElmZ21wbCwgJFVFOXBJKQogICAgewogICAgICAgIGtpICghICRVRTlwSSBrbXNURW1GSVFpICRJVnFJRlRJZmdtcGwpIHsKICAgICAgICAgICAgVGpoUXUgbUl1IEJFOXBJZ2hoUWgoc3Foa21UaSgnQkU5cEkgWyVzXSBrcyBtUVQgUWkgVGpJIElWcUlGVElmIEltcGwgVHZxSSBbJXNdLicsIFVFaF9JVnFRaFQoJFVFOXBJLCBUaHBJKSwgJElWcUlGVElmZ21wbCkpOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRVRTlwSSBrbXNURW1GSVFpIHJFRjhJZmdtcGwKICAgICAgICAgICAgICAgID8gJFVFOXBJLT5VRTlwSQogICAgICAgICAgICAgICAgOiAkVUU5cEktPm1FbEk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRW0gRWhoRXYgRVRUaGtlcFRJIHVrVGogVGpJIEprVUltIDhJdiBFbWYgVUU5cEkgc0lULgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkcUVUagogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gSklUdGhoRXZ0VFRoa2VwVElia1RqQkU5cEkoJHFFVGosICQ4SXYsICRVRTlwSSkKICAgIHsKICAgICAgICBoSVRwaG0gVEVxKCRUamtzLT5KSVR0aGhFdnRUVGhrZXBUSXJ2MUl2KCQ4SXYpLCBpcG1GVGtRbSAoJiRFaGhFdikgcHNJICgkcUVUaiwgJFVFOXBJKSB7CiAgICAgICAgICAgIHRoaDo6c0lUKCRFaGhFdiwgc1RoX2hJcTlFRkkoJy0+JywgJy4nLCAkcUVUaiksICRVRTlwSSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRW0gRWhoRXYgRVRUaGtlcFRJIFFoIGhJVHBobSBFbSBJbHFUdiBFaGhFdiBraSBrVCBrcyBtUVQgc0lULgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBKSVR0aGhFdnRUVGhrZXBUSXJ2MUl2KCQ4SXYpCiAgICB7CiAgICAgICAga2kgKCEga3NzSVQoJFRqa3MtPkVUVGhrZXBUSXNbJDhJdl0pKSB7CiAgICAgICAgICAgIGhJVHBobSBbXTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkVGprcy0+aWhRbERzUW0oCiAgICAgICAgICAgICRUamtzLT5rc2dtRmh2cVRJZm9Fc1RFZTlJKCQ4SXYpCiAgICAgICAgICAgICAgICA/ICRUamtzLT5paFFsZ21GaHZxVElmT1Roa21KKCRUamtzLT5FVFRoa2VwVElzWyQ4SXZdKQogICAgICAgICAgICAgICAgOiAkVGprcy0+RVRUaGtlcFRJc1skOEl2XQogICAgICAgICk7CiAgICB9CgogICAgKyoqCiAgICAgKiBvRXNUIFRqSSBKa1VJbSBFVFRoa2VwVEkgVFEgRE9NQS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJDhJdgogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIHNUaGttSgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRkVzVHRUVGhrZXBUSXRzRHNRbSgkOEl2LCAkVUU5cEkpCiAgICB7CiAgICAgICAgJFVFOXBJID0gJFRqa3MtPkVzRHNRbSgkVUU5cEkpOwoKICAgICAgICBraSAoJFVFOXBJID09PSBpRTlzSSkgewogICAgICAgICAgICBUamhRdSBEc1FtZ21GUWZrbUpnVkZJcVRrUW06OmlRaHRUVGhrZXBUSSgKICAgICAgICAgICAgICAgICRUamtzLCAkOEl2LCBMc1FtXzlFc1RfSWhoUWhfbHNKKCkKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkVUU5cEk7CiAgICB9CgogICAgKyoqCiAgICAgKiBnbUZRZkkgVGpJIEprVUltIFVFOXBJIEVzIERPTUEuCiAgICAgKgogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIHNUaGttSgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRXNEc1FtKCRVRTlwSSkKICAgIHsKICAgICAgICBoSVRwaG0gRHNRbTo6SW1GUWZJKCRVRTlwSSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBuSUZRZkkgVGpJIEprVUltIERPTUEgZUVGOCBrbVRRIEVtIEVoaEV2IFFoIFFlTElGVC4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJFVFOXBJCiAgICAgKiBAcUVoRWwgIGVRUTkgICRFc01lTElGVAogICAgICogQGhJVHBobSBsa1ZJZgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gaWhRbERzUW0oJFVFOXBJLCAkRXNNZUxJRlQgPSBpRTlzSSkKICAgIHsKICAgICAgICBoSVRwaG0gRHNRbTo6ZklGUWZJKCRVRTlwSSA/PyAnJywgISAkRXNNZUxJRlQpOwogICAgfQoKICAgICsqKgogICAgICogbklGaHZxVCBUakkgSmtVSW0gSW1GaHZxVElmIHNUaGttSi4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBpaFFsZ21GaHZxVElmT1Roa21KKCRVRTlwSSkKICAgIHsKICAgICAgICBoSVRwaG0gc1RFVGtGOjpGcGhoSW1UZ21GaHZxVEloKCktPmZJRmh2cVQoJFVFOXBJLCBpRTlzSSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBvRXNUIFRqSSBKa1VJbSBFVFRoa2VwVEkgVFEgRW0gSW1GaHZxVElmIHNUaGttSi4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJDhJdgogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIHNUaGttSgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRkVzVHRUVGhrZXBUSXRzZ21GaHZxVElmT1Roa21KKCQ4SXYsICRVRTlwSSkKICAgIHsKICAgICAgICBoSVRwaG0gc1RFVGtGOjpGcGhoSW1UZ21GaHZxVEloKCktPkltRmh2cVQoJFVFOXBJLCBpRTlzSSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBPSVQgVGpJIEltRmh2cVRJaCBrbXNURW1GSSBUakVUIHVrOTkgZUkgcHNJZiBUUSBJbUZodnFUIEVUVGhrZXBUSXMuCiAgICAgKgogICAgICogQHFFaEVsICBcSzk5cGxrbUVUSVxvUW1UaEVGVHNcZ21GaHZxVGtRbVxnbUZodnFUSWh8bXA5OSAgJEltRmh2cVRJaAogICAgICogQGhJVHBobSBVUWtmCiAgICAgKisKICAgIHFwZTlrRiBzVEVUa0YgaXBtRlRrUW0gSW1GaHZxVFBza21KKCRJbUZodnFUSWgpCiAgICB7CiAgICAgICAgc1RFVGtGOjokSW1GaHZxVEloID0gJEltRmh2cVRJaDsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgRnBoaEltVCBJbUZodnFUSWggZUlrbUogcHNJZiBldiBUakkgbFFmSTkuCiAgICAgKgogICAgICogQGhJVHBobSBcSzk5cGxrbUVUSVxvUW1UaEVGVHNcZ21GaHZxVGtRbVxnbUZodnFUSWgKICAgICAqKwogICAgcWhRVElGVElmIHNURVRrRiBpcG1GVGtRbSBGcGhoSW1UZ21GaHZxVEloKCkKICAgIHsKICAgICAgICBoSVRwaG0gc1RFVGtGOjokSW1GaHZxVEloID8/IG9odnFUOjpKSVQyRUZFZklOUVFUKCk7CiAgICB9CgogICAgKyoqCiAgICAgKiBvRXNUIFRqSSBKa1VJbSBFVFRoa2VwVEkgVFEgRSBqRXNqSWYgc1Roa21KLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gc1Roa21KCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBGRXNUdFRUaGtlcFRJdHNTRXNqSWZPVGhrbUooJDhJdiwgJFVFOXBJKQogICAgewogICAgICAgIGtpICgkVUU5cEkgPT09IG1wOTkpIHsKICAgICAgICAgICAgaElUcGhtIG1wOTk7CiAgICAgICAgfQoKICAgICAgICBraSAoISBTRXNqOjprc1NFc2pJZigkVUU5cEkpKSB7CiAgICAgICAgICAgIGhJVHBobSBTRXNqOjpsRThJKCRVRTlwSSk7CiAgICAgICAgfQoKICAgICAgICBraSAoISBTRXNqOjpVSWhraXZvUW1pa0pwaEVUa1FtKCRVRTlwSSkpIHsKICAgICAgICAgICAgVGpoUXUgbUl1IE5wbVRrbElnVkZJcVRrUW0oIm9RcDlmIG1RVCBVSWhraXYgVGpJIGpFc2pJZiBVRTlwSSdzIEZRbWlrSnBoRVRrUW0uIik7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFVFOXBJOwogICAgfQoKICAgICsqKgogICAgICogbklGUWZJIFRqSSBKa1VJbSBpOVFFVC4KICAgICAqCiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGloUWwyOVFFVCgkVUU5cEkpCiAgICB7CiAgICAgICAgaElUcGhtIGxFVEZqICgoc1Roa21KKSAkVUU5cEkpIHsKICAgICAgICAgICAgJ0ttaWtta1R2JyA9PiBLQTIsCiAgICAgICAgICAgICctS21pa21rVHYnID0+IC1LQTIsCiAgICAgICAgICAgICdBRUEnID0+IEF0QSwKICAgICAgICAgICAgZklpRXA5VCA9PiAoaTlRRVQpICRVRTlwSSwKICAgICAgICB9OwogICAgfQoKICAgICsqKgogICAgICogTklUcGhtIEUgZklGa2xFOSBFcyBzVGhrbUouCiAgICAgKgogICAgICogQHFFaEVsICBpOVFFVHxzVGhrbUogICRVRTlwSQogICAgICogQHFFaEVsICBrbVQgICRmSUZrbEU5cwogICAgICogQGhJVHBobSBzVGhrbUoKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEVzbklGa2xFOSgkVUU5cEksICRmSUZrbEU5cykKICAgIHsKICAgICAgICBUaHYgewogICAgICAgICAgICBoSVRwaG0gKHNUaGttSikgcmtKbklGa2xFOTo6UWkoJFVFOXBJKS0+VFFPRkU5SSgkZklGa2xFOXMsIE5RcG1ma21KM1FmSTo6U3Q2Ml9QYSk7CiAgICAgICAgfSBGRVRGaiAocmhrRjgzRVRqZ1ZGSXFUa1FtICRJKSB7CiAgICAgICAgICAgIFRqaFF1IG1JdSAzRVRqZ1ZGSXFUa1FtKCdQbUVlOUkgVFEgRkVzVCBVRTlwSSBUUSBFIGZJRmtsRTkuJywgcWhJVWtRcHM6ICRJKTsKICAgICAgICB9CiAgICB9CgogICAgKyoqCiAgICAgKiBOSVRwaG0gRSBUa2xJc1RFbHEgRXMgbkVUSUhrbEkgUWVMSUZUIHVrVGogVGtsSSBzSVQgVFEgd3c6d3c6d3cuCiAgICAgKgogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIFxLOTlwbGttRVRJXE9wcXFRaFRcb0VoZVFtCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBFc25FVEkoJFVFOXBJKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+RXNuRVRJSGtsSSgkVUU5cEkpLT5zVEVoVE1pbkV2KCk7CiAgICB9CgogICAgKyoqCiAgICAgKiBOSVRwaG0gRSBUa2xJc1RFbHEgRXMgbkVUSUhrbEkgUWVMSUZULgogICAgICoKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSBcSzk5cGxrbUVUSVxPcHFxUWhUXG9FaGVRbQogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRXNuRVRJSGtsSSgkVUU5cEkpCiAgICB7CiAgICAgICAgKysgS2kgVGprcyBVRTlwSSBrcyBFOWhJRWZ2IEUgb0VoZVFtIGttc1RFbUZJLCB1SSBzakU5OSBMcHNUIGhJVHBobSBrVCBFcyBrcy4KICAgICAgICArKyBIamtzIHFoSVVJbVRzIHBzIGpFVWttSiBUUSBoSS1rbXNURW1Ua0VUSSBFIG9FaGVRbSBrbXNURW1GSSB1akltIHVJIDhtUXUKICAgICAgICArKyBrVCBFOWhJRWZ2IGtzIFFtSSwgdWprRmogdVFwOWZtJ1QgZUkgaXA5aWs5OUlmIGV2IFRqSSBuRVRJSGtsSSBGaklGOC4KICAgICAgICBraSAoJFVFOXBJIGttc1RFbUZJUWkgb0VoZVFtS21USWhpRUZJKSB7CiAgICAgICAgICAgIGhJVHBobSBuRVRJOjprbXNURW1GSSgkVUU5cEkpOwogICAgICAgIH0KCiAgICAgICAgKysgS2kgVGpJIFVFOXBJIGtzIEU5aElFZnYgRSBuRVRJSGtsSSBrbXNURW1GSSwgdUkgdWs5OSBMcHNUIHM4a3EgVGpJIGhJc1QgUWkKICAgICAgICArKyBUaklzSSBGaklGOHMgc2ttRkkgVGpJdiB1azk5IGVJIEUgdUVzVEkgUWkgVGtsSSwgRW1mIGprbWZJaCBxSWhpUWhsRW1GSQogICAgICAgICsrIHVqSW0gRmpJRjhrbUogVGpJIGlrSTlmLiBiSSB1azk5IExwc1QgaElUcGhtIFRqSSBuRVRJSGtsSSBoa0pqVCBFdUV2LgogICAgICAgIGtpICgkVUU5cEkga21zVEVtRklRaSBuRVRJSGtsSUttVEloaUVGSSkgewogICAgICAgICAgICBoSVRwaG0gbkVUSTo6cUVoc0koCiAgICAgICAgICAgICAgICAkVUU5cEktPmlRaGxFVCgnYy1sLWYgUzprOnMucCcpLCAkVUU5cEktPkpJVEhrbElXUW1JKCkKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgICsrIEtpIFRqa3MgVUU5cEkga3MgRW0ga21USUpJaCwgdUkgdWs5OSBFc3NwbEkga1Qga3MgRSBQQUtDIFRrbElzVEVscSdzIFVFOXBJCiAgICAgICAgKysgRW1mIGlRaGxFVCBFIG9FaGVRbSBRZUxJRlQgaWhRbCBUamtzIFRrbElzVEVscS4gSGprcyBFOTlRdXMgaTlJVmtlazlrVHYKICAgICAgICArKyB1akltIGZJaWtta21KIHZRcGggZkVUSSBpa0k5ZnMgRXMgVGpJdiBsa0pqVCBlSSBQQUtDIFRrbElzVEVscXMgakloSS4KICAgICAgICBraSAoa3NfbXBsSWhrRigkVUU5cEkpKSB7CiAgICAgICAgICAgIGhJVHBobSBuRVRJOjpGaElFVEkyaFFsSGtsSXNURWxxKCRVRTlwSSk7CiAgICAgICAgfQoKICAgICAgICArKyBLaSBUakkgVUU5cEkga3Mga20gc2tscTl2IHZJRWgsIGxRbVRqLCBmRXYgaVFobEVULCB1SSB1azk5IGttc1RFbVRrRVRJIFRqSQogICAgICAgICsrIG9FaGVRbSBrbXNURW1GSXMgaWhRbCBUakVUIGlRaGxFVC4gdEpFa20sIFRqa3MgcWhRVWtmSXMgaVFoIHNrbHE5SSBmRVRJCiAgICAgICAgKysgaWtJOWZzIFFtIFRqSSBmRVRFZUVzSSwgdWprOUkgc1RrOTkgc3BxcVFoVGttSiBvRWhlUW1rV0lmIEZRbVVJaHNrUW0uCiAgICAgICAga2kgKCRUamtzLT5rc09URW1mRWhmbkVUSTJRaGxFVCgkVUU5cEkpKSB7CiAgICAgICAgICAgIGhJVHBobSBuRVRJOjprbXNURW1GSShvRWhlUW06OkZoSUVUSTJoUWwyUWhsRVQoJ2MtbC1mJywgJFVFOXBJKS0+c1RFaFRNaW5FdigpKTsKICAgICAgICB9CgogICAgICAgICRpUWhsRVQgPSAkVGprcy0+SklUbkVUSTJRaGxFVCgpOwoKICAgICAgICArKyAya21FOTl2LCB1SSB1azk5IExwc1QgRXNzcGxJIFRqa3MgZkVUSSBrcyBrbSBUakkgaVFobEVUIHBzSWYgZXYgZklpRXA5VCBRbQogICAgICAgICsrIFRqSSBmRVRFZUVzSSBGUW1tSUZUa1FtIEVtZiBwc0kgVGpFVCBpUWhsRVQgVFEgRmhJRVRJIFRqSSBvRWhlUW0gUWVMSUZUCiAgICAgICAgKysgVGpFVCBrcyBoSVRwaG1JZiBlRUY4IFFwVCBUUSBUakkgZklVSTlRcUlocyBFaVRJaCB1SSBGUW1VSWhUIGtUIGpJaEkuCiAgICAgICAgVGh2IHsKICAgICAgICAgICAgJGZFVEkgPSBuRVRJOjpGaElFVEkyaFFsMlFobEVUKCRpUWhsRVQsICRVRTlwSSk7CiAgICAgICAgfSBGRVRGaiAoS21VRTlrZnRoSnBsSW1UZ1ZGSXFUa1FtKSB7CiAgICAgICAgICAgICRmRVRJID0gaUU5c0k7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJGZFVEkgPzogbkVUSTo6cUVoc0koJFVFOXBJKTsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBUakkgSmtVSW0gVUU5cEkga3MgRSBzVEVtZkVoZiBmRVRJIGlRaGxFVC4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtzT1RFbWZFaGZuRVRJMlFobEVUKCRVRTlwSSkKICAgIHsKICAgICAgICBoSVRwaG0gcWhJSl9sRVRGaignK14oXGZ7eX0pLShcZntYLHh9KS0oXGZ7WCx4fSkkKycsICRVRTlwSSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBvUW1VSWhUIEUgbkVUSUhrbEkgVFEgRSBzVFFoRWU5SSBzVGhrbUouCiAgICAgKgogICAgICogQHFFaEVsICBsa1ZJZiAgJFVFOXBJCiAgICAgKiBAaElUcGhtIHNUaGttSnxtcDk5CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBpaFFsbkVUSUhrbEkoJFVFOXBJKQogICAgewogICAgICAgIGhJVHBobSBJbHFUdigkVUU5cEkpID8gJFVFOXBJIDogJFRqa3MtPkVzbkVUSUhrbEkoJFVFOXBJKS0+aVFobEVUKAogICAgICAgICAgICAkVGprcy0+SklUbkVUSTJRaGxFVCgpCiAgICAgICAgKTsKICAgIH0KCiAgICArKioKICAgICAqIE5JVHBobSBFIFRrbElzVEVscSBFcyBwbWtWIFRrbElzVEVscS4KICAgICAqCiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0ga21UCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBFc0hrbElzVEVscSgkVUU5cEkpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5Fc25FVElIa2xJKCRVRTlwSSktPkpJVEhrbElzVEVscSgpOwogICAgfQoKICAgICsqKgogICAgICogYWhJcUVoSSBFIGZFVEkgaVFoIEVoaEV2ICsgRE9NQSBzSWhrRTlrV0VUa1FtLgogICAgICoKICAgICAqIEBxRWhFbCAgXG5FVElIa2xJS21USWhpRUZJICAkZkVUSQogICAgICogQGhJVHBobSBzVGhrbUoKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIHNJaGtFOWtXSW5FVEkobkVUSUhrbElLbVRJaGlFRkkgJGZFVEkpCiAgICB7CiAgICAgICAgaElUcGhtICRmRVRJIGttc1RFbUZJUWkgbkVUSUhrbElLbGxwVEVlOUkgPwogICAgICAgICAgICBvRWhlUW1LbGxwVEVlOUk6Omttc1RFbUZJKCRmRVRJKS0+VFFET01BKCkgOgogICAgICAgICAgICBvRWhlUW06Omttc1RFbUZJKCRmRVRJKS0+VFFET01BKCk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgVGpJIEVUVGhrZXBUSXMgVGpFVCBzalFwOWYgZUkgRlFtVUloVElmIFRRIGZFVElzLgogICAgICoKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIEpJVG5FVElzKCkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPnBzSXNIa2xJc1RFbHFzKCkgPyBbCiAgICAgICAgICAgICRUamtzLT5KSVRvaElFVElmdFRvUTlwbG0oKSwKICAgICAgICAgICAgJFRqa3MtPkpJVFBxZkVUSWZ0VG9ROXBsbSgpLAogICAgICAgIF0gOiBbXTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgaVFobEVUIGlRaCBmRVRFZUVzSSBzVFFoSWYgZkVUSXMuCiAgICAgKgogICAgICogQGhJVHBobSBzVGhrbUoKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIEpJVG5FVEkyUWhsRVQoKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+ZkVUSTJRaGxFVCA/OiAkVGprcy0+SklUb1FtbUlGVGtRbSgpLT5KSVRHcElodjBoRWxsRWgoKS0+SklUbkVUSTJRaGxFVCgpOwogICAgfQoKICAgICsqKgogICAgICogT0lUIFRqSSBmRVRJIGlRaGxFVCBwc0lmIGV2IFRqSSBsUWZJOS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJGlRaGxFVAogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gc0lUbkVUSTJRaGxFVCgkaVFobEVUKQogICAgewogICAgICAgICRUamtzLT5mRVRJMlFobEVUID0gJGlRaGxFVDsKCiAgICAgICAgaElUcGhtICRUamtzOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIHVqSVRqSWggRW0gRVRUaGtlcFRJIHNqUXA5ZiBlSSBGRXNUIFRRIEUgbUVUa1VJIFR2cUkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgRWhoRXZ8c1Roa21KfG1wOTkgICRUdnFJcwogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBqRXNvRXNUKCQ4SXYsICRUdnFJcyA9IG1wOTkpCiAgICB7CiAgICAgICAga2kgKEVoaEV2XzhJdl9JVmtzVHMoJDhJdiwgJFRqa3MtPkpJVG9Fc1RzKCkpKSB7CiAgICAgICAgICAgIGhJVHBobSAkVHZxSXMgPyBrbV9FaGhFdigkVGprcy0+SklUb0VzVEh2cUkoJDhJdiksIChFaGhFdikgJFR2cUlzLCBUaHBJKSA6IFRocEk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gaUU5c0k7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgVGpJIEVUVGhrZXBUSXMgVGpFVCBzalFwOWYgZUkgRkVzVC4KICAgICAqCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVRvRXNUcygpCiAgICB7CiAgICAgICAga2kgKCRUamtzLT5KSVRLbUZoSWxJbVRrbUooKSkgewogICAgICAgICAgICBoSVRwaG0gRWhoRXZfbEloSkkoWyRUamtzLT5KSVQxSXZBRWxJKCkgPT4gJFRqa3MtPkpJVDFJdkh2cUkoKV0sICRUamtzLT5GRXNUcyk7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3MtPkZFc1RzOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBFVFRoa2VwVElzIFRqRVQgc2pRcDlmIGVJIEZFc1QuCiAgICAgKgogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gRkVzVHMoKQogICAgewogICAgICAgIGhJVHBobSBbXTsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSB1aklUakloIEUgVUU5cEkga3MgbkVUSSArIG5FVElIa2xJIEZFc1RFZTlJIGlRaCBrbWVRcG1mIGxFbWtxcDlFVGtRbS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJDhJdgogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBrc25FVElvRXNURWU5SSgkOEl2KQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+akVzb0VzVCgkOEl2LCBbJ2ZFVEknLCAnZkVUSVRrbEknLCAna2xscFRFZTlJX2ZFVEknLCAna2xscFRFZTlJX2ZFVElUa2xJJ10pOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIHVqSVRqSWggRSBVRTlwSSBrcyBuRVRJICsgbkVUSUhrbEkgRnBzVFFsLUZFc1RFZTlJIGlRaCBrbWVRcG1mIGxFbWtxcDlFVGtRbS4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJDhJdgogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBrc25FVElvRXNURWU5SWJrVGpvcHNUUWwyUWhsRVQoJDhJdikKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmpFc29Fc1QoJDhJdiwgWydGcHNUUWxfZkVUSVRrbEknLCAna2xscFRFZTlJX0Zwc1RRbF9mRVRJVGtsSSddKTsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSB1aklUakloIEUgVUU5cEkga3MgRE9NQSBGRXNURWU5SSBpUWgga21lUXBtZiBsRW1rcXA5RVRrUW0uCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gZVFROQogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0ga3NEc1Ftb0VzVEVlOUkoJDhJdikKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmpFc29Fc1QoJDhJdiwgWydFaGhFdicsICdMc1FtJywgJ1FlTElGVCcsICdGUTk5SUZUa1FtJywgJ0ltRmh2cVRJZjpFaGhFdicsICdJbUZodnFUSWY6RlE5OUlGVGtRbScsICdJbUZodnFUSWY6THNRbScsICdJbUZodnFUSWY6UWVMSUZUJ10pOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIHVqSVRqSWggRSBVRTlwSSBrcyBFbSBJbUZodnFUSWYgRkVzVEVlOUkgaVFoIGttZVFwbWYgbEVta3FwOUVUa1FtLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtzZ21GaHZxVElmb0VzVEVlOUkoJDhJdikKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmpFc29Fc1QoJDhJdiwgWydJbUZodnFUSWYnLCAnSW1GaHZxVElmOkVoaEV2JywgJ0ltRmh2cVRJZjpGUTk5SUZUa1FtJywgJ0ltRmh2cVRJZjpMc1FtJywgJ0ltRmh2cVRJZjpRZUxJRlQnXSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBuSVRJaGxrbUkga2kgVGpJIEprVUltIDhJdiBrcyBGRXNUIHBza21KIEUgRnBzVFFsIEY5RXNzLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqCiAgICAgKiBAVGpoUXVzIFxBS0F0b01OZ1xuRVRFZUVzSW9RaElcZzlRUnBJbVRcS21VRTlrZm9Fc1RnVkZJcVRrUW0KICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtzbzlFc3NvRXNURWU5SSgkOEl2KQogICAgewogICAgICAgICRGRXNUcyA9ICRUamtzLT5KSVRvRXNUcygpOwoKICAgICAgICBraSAoISBFaGhFdl84SXZfSVZrc1RzKCQ4SXYsICRGRXNUcykpIHsKICAgICAgICAgICAgaElUcGhtIGlFOXNJOwogICAgICAgIH0KCiAgICAgICAgJEZFc1RIdnFJID0gJFRqa3MtPnFFaHNJb0VzVElobzlFc3MoJEZFc1RzWyQ4SXZdKTsKCiAgICAgICAga2kgKGttX0VoaEV2KCRGRXNUSHZxSSwgc1RFVGtGOjokcWhrbGtUa1VJb0VzVEh2cUlzKSkgewogICAgICAgICAgICBoSVRwaG0gaUU5c0k7CiAgICAgICAgfQoKICAgICAgICBraSAoRjlFc3NfSVZrc1RzKCRGRXNUSHZxSSkpIHsKICAgICAgICAgICAgaElUcGhtIFRocEk7CiAgICAgICAgfQoKICAgICAgICBUamhRdSBtSXUgS21VRTlrZm9Fc1RnVkZJcVRrUW0oJFRqa3MtPkpJVDNRZkk5KCksICQ4SXYsICRGRXNUSHZxSSk7CiAgICB9CgogICAgKyoqCiAgICAgKiBuSVRJaGxrbUkga2kgVGpJIEprVUltIDhJdiBrcyBGRXNUIHBza21KIEVtIEltcGwuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBoSVRwaG0gZVFROQogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0ga3NnbXBsb0VzVEVlOUkoJDhJdikKICAgIHsKICAgICAgICAkRkVzVHMgPSAkVGprcy0+SklUb0VzVHMoKTsKCiAgICAgICAga2kgKCEgRWhoRXZfOEl2X0lWa3NUcygkOEl2LCAkRkVzVHMpKSB7CiAgICAgICAgICAgIGhJVHBobSBpRTlzSTsKICAgICAgICB9CgogICAgICAgICRGRXNUSHZxSSA9ICRGRXNUc1skOEl2XTsKCiAgICAgICAga2kgKGttX0VoaEV2KCRGRXNUSHZxSSwgc1RFVGtGOjokcWhrbGtUa1VJb0VzVEh2cUlzKSkgewogICAgICAgICAgICBoSVRwaG0gaUU5c0k7CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gSW1wbF9JVmtzVHMoJEZFc1RIdnFJKTsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBUakkgOEl2IGtzIGZJVWtFZTlJIHBza21KIEUgRnBzVFFsIEY5RXNzLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqCiAgICAgKiBAVGpoUXVzIFxBS0F0b01OZ1xuRVRFZUVzSW9RaElcZzlRUnBJbVRcS21VRTlrZm9Fc1RnVkZJcVRrUW0KICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtzbzlFc3NuSVVrRWU5SSgkOEl2KQogICAgewogICAgICAgIGtpICghICRUamtzLT5rc285RXNzb0VzVEVlOUkoJDhJdikpIHsKICAgICAgICAgICAgaElUcGhtIGlFOXNJOwogICAgICAgIH0KCiAgICAgICAgJEZFc1RIdnFJID0gJFRqa3MtPmhJc1E5VUlvRXNUSWhvOUVzcygkOEl2KTsKCiAgICAgICAgaElUcGhtIGxJVGpRZl9JVmtzVHMoJEZFc1RIdnFJOjpGOUVzcywgJ2ttRmhJbEltVCcpICYmIGxJVGpRZl9JVmtzVHMoJEZFc1RIdnFJOjpGOUVzcywgJ2ZJRmhJbEltVCcpOwogICAgfQoKICAgICsqKgogICAgICogbklUSWhsa21JIGtpIFRqSSA4SXYga3Mgc0loa0U5a1dFZTlJIHBza21KIEUgRnBzVFFsIEY5RXNzLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqCiAgICAgKiBAVGpoUXVzIFxBS0F0b01OZ1xuRVRFZUVzSW9RaElcZzlRUnBJbVRcS21VRTlrZm9Fc1RnVkZJcVRrUW0KICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGtzbzlFc3NPSWhrRTlrV0VlOUkoJDhJdikKICAgIHsKICAgICAgICBoSVRwaG0gISAkVGprcy0+a3NnbXBsb0VzVEVlOUkoJDhJdikgJiYKICAgICAgICAgICAgJFRqa3MtPmtzbzlFc3NvRXNURWU5SSgkOEl2KSAmJgogICAgICAgICAgICBsSVRqUWZfSVZrc1RzKCRUamtzLT5oSXNROVVJb0VzVElobzlFc3MoJDhJdiksICdzSWhrRTlrV0knKTsKICAgIH0KCiAgICArKioKICAgICAqIE5Jc1E5VUkgVGpJIEZwc1RRbCBGRXNUSWggRjlFc3MgaVFoIEUgSmtVSW0gOEl2LgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAaElUcGhtIGxrVklmCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBoSXNROVVJb0VzVElobzlFc3MoJDhJdikKICAgIHsKICAgICAgICAkRkVzVEh2cUkgPSAkVGprcy0+SklUb0VzVHMoKVskOEl2XTsKCiAgICAgICAgJEVoSnBsSW1UcyA9IFtdOwoKICAgICAgICBraSAoa3Nfc1Roa21KKCRGRXNUSHZxSSkgJiYgc1RoX0ZRbVRFa21zKCRGRXNUSHZxSSwgJzonKSkgewogICAgICAgICAgICAkc0lKbEltVHMgPSBJVnE5UWZJKCc6JywgJEZFc1RIdnFJLCB4KTsKCiAgICAgICAgICAgICRGRXNUSHZxSSA9ICRzSUpsSW1Uc1t3XTsKICAgICAgICAgICAgJEVoSnBsSW1UcyA9IElWcTlRZkkoJywnLCAkc0lKbEltVHNbWF0pOwogICAgICAgIH0KCiAgICAgICAga2kgKGtzX3NwZUY5RXNzX1FpKCRGRXNUSHZxSSwgb0VzVEVlOUk6OkY5RXNzKSkgewogICAgICAgICAgICAkRkVzVEh2cUkgPSAkRkVzVEh2cUk6OkZFc1RQc2ttSigkRWhKcGxJbVRzKTsKICAgICAgICB9CgogICAgICAgIGtpIChrc19RZUxJRlQoJEZFc1RIdnFJKSkgewogICAgICAgICAgICBoSVRwaG0gJEZFc1RIdnFJOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtIG1JdSAkRkVzVEh2cUkoLi4uJEVoSnBsSW1Ucyk7CiAgICB9CgogICAgKyoqCiAgICAgKiBhRWhzSSBUakkgSmtVSW0gRkVzVEloIEY5RXNzLCBoSWxRVWttSiBFbXYgRWhKcGxJbVRzLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkRjlFc3MKICAgICAqIEBoSVRwaG0gc1Roa21KCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBxRWhzSW9Fc1RJaG85RXNzKCRGOUVzcykKICAgIHsKICAgICAgICBoSVRwaG0gISBzVGhfRlFtVEVrbXMoJEY5RXNzLCAnOicpCiAgICAgICAgICAgID8gJEY5RXNzCiAgICAgICAgICAgIDogSVZxOVFmSSgnOicsICRGOUVzcywgeClbd107CiAgICB9CgogICAgKyoqCiAgICAgKiAzSWhKSSBUakkgRkVzVCBGOUVzcyBFbWYgRVRUaGtlcFRJIEZFc1QgRVRUaGtlcFRJcyBlRUY4IGttVFEgVGpJIGxRZkk5LgogICAgICoKICAgICAqIEBoSVRwaG0gVVFrZgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gbEloSkl0VFRoa2VwVElzMmhRbG9FRmpJZm9Fc1RzKCkKICAgIHsKICAgICAgICAkVGprcy0+bEloSkl0VFRoa2VwVElzMmhRbG85RXNzb0VzVHMoKTsKICAgICAgICAkVGprcy0+bEloSkl0VFRoa2VwVElzMmhRbHRUVGhrZXBUSW9Fc1RzKCk7CiAgICB9CgogICAgKyoqCiAgICAgKiAzSWhKSSBUakkgRkVzVCBGOUVzcyBFVFRoa2VwVElzIGVFRjgga21UUSBUakkgbFFmSTkuCiAgICAgKgogICAgICogQGhJVHBobSBVUWtmCiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBsSWhKSXRUVGhrZXBUSXMyaFFsbzlFc3NvRXNUcygpCiAgICB7CiAgICAgICAgaVFoSUVGaiAoJFRqa3MtPkY5RXNzb0VzVG9FRmpJIEVzICQ4SXYgPT4gJFVFOXBJKSB7CiAgICAgICAgICAgICRGRXNUSWggPSAkVGprcy0+aElzUTlVSW9Fc1RJaG85RXNzKCQ4SXYpOwoKICAgICAgICAgICAgJFRqa3MtPkVUVGhrZXBUSXMgPSBFaGhFdl9sSWhKSSgKICAgICAgICAgICAgICAgICRUamtzLT5FVFRoa2VwVElzLAogICAgICAgICAgICAgICAgJEZFc1RJaCBrbXNURW1GSVFpIG9Fc1RzS21lUXBtZnRUVGhrZXBUSXMKICAgICAgICAgICAgICAgICAgICA/IFskOEl2ID0+ICRVRTlwSV0KICAgICAgICAgICAgICAgICAgICA6ICRUamtzLT5tUWhsRTlrV0lvRXNUbzlFc3NOSXNxUW1zSSgkOEl2LCAkRkVzVEloLT5zSVQoJFRqa3MsICQ4SXYsICRVRTlwSSwgJFRqa3MtPkVUVGhrZXBUSXMpKQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICArKioKICAgICAqIDNJaEpJIFRqSSBGRXNUIEY5RXNzIEVUVGhrZXBUSXMgZUVGOCBrbVRRIFRqSSBsUWZJOS4KICAgICAqCiAgICAgKiBAaElUcGhtIFVRa2YKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIGxJaEpJdFRUaGtlcFRJczJoUWx0VFRoa2VwVElvRXNUcygpCiAgICB7CiAgICAgICAgaVFoSUVGaiAoJFRqa3MtPkVUVGhrZXBUSW9Fc1RvRUZqSSBFcyAkOEl2ID0+ICRVRTlwSSkgewogICAgICAgICAgICAkRVRUaGtlcFRJID0gJFRqa3MtPntPVGg6OkZFbEk5KCQ4SXYpfSgpOwoKICAgICAgICAgICAga2kgKCRFVFRoa2VwVEktPkpJVCAmJiAhICRFVFRoa2VwVEktPnNJVCkgewogICAgICAgICAgICAgICAgRlFtVGttcEk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRGRTk5ZUVGOCA9ICRFVFRoa2VwVEktPnNJVCA/OiBpcG1GVGtRbSAoJFVFOXBJKSBwc0kgKCQ4SXYpIHsKICAgICAgICAgICAgICAgICRUamtzLT5FVFRoa2VwVElzWyQ4SXZdID0gJFVFOXBJOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgJFRqa3MtPkVUVGhrZXBUSXMgPSBFaGhFdl9sSWhKSSgKICAgICAgICAgICAgICAgICRUamtzLT5FVFRoa2VwVElzLAogICAgICAgICAgICAgICAgJFRqa3MtPm1RaGxFOWtXSW9Fc1RvOUVzc05Jc3FRbXNJKAogICAgICAgICAgICAgICAgICAgICQ4SXYsICRGRTk5ZUVGOCgkVUU5cEksICRUamtzLT5FVFRoa2VwVElzKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICArKioKICAgICAqIEFRaGxFOWtXSSBUakkgaElzcVFtc0kgaWhRbCBFIEZwc1RRbCBGOUVzcyBGRXNUSWguCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRVRTlwSQogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgaXBtRlRrUW0gbVFobEU5a1dJb0VzVG85RXNzTklzcVFtc0koJDhJdiwgJFVFOXBJKQogICAgewogICAgICAgIGhJVHBobSBrc19FaGhFdigkVUU5cEkpID8gJFVFOXBJIDogWyQ4SXYgPT4gJFVFOXBJXTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBFOTkgUWkgVGpJIEZwaGhJbVQgRVRUaGtlcFRJcyBRbSBUakkgbFFmSTkuCiAgICAgKgogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gSklUdFRUaGtlcFRJcygpCiAgICB7CiAgICAgICAgJFRqa3MtPmxJaEpJdFRUaGtlcFRJczJoUWxvRUZqSWZvRXNUcygpOwoKICAgICAgICBoSVRwaG0gJFRqa3MtPkVUVGhrZXBUSXM7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRTk5IFFpIFRqSSBGcGhoSW1UIEVUVGhrZXBUSXMgUW0gVGpJIGxRZkk5IGlRaCBFbSBrbXNJaFQgUXFJaEVUa1FtLgogICAgICoKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEpJVHRUVGhrZXBUSXMyUWhLbXNJaFQoKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+SklUdFRUaGtlcFRJcygpOwogICAgfQoKICAgICsqKgogICAgICogT0lUIFRqSSBFaGhFdiBRaSBsUWZJOSBFVFRoa2VwVElzLiBBUSBGaklGOGttSiBrcyBmUW1JLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRFVFRoa2VwVElzCiAgICAgKiBAcUVoRWwgIGVRUTkgICRzdm1GCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBzSVRORXV0VFRoa2VwVElzKEVoaEV2ICRFVFRoa2VwVElzLCAkc3ZtRiA9IGlFOXNJKQogICAgewogICAgICAgICRUamtzLT5FVFRoa2VwVElzID0gJEVUVGhrZXBUSXM7CgogICAgICAgIGtpICgkc3ZtRikgewogICAgICAgICAgICAkVGprcy0+c3ZtRk1oa0prbUU5KCk7CiAgICAgICAgfQoKICAgICAgICAkVGprcy0+RjlFc3NvRXNUb0VGakkgPSBbXTsKICAgICAgICAkVGprcy0+RVRUaGtlcFRJb0VzVG9FRmpJID0gW107CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgbFFmSTkncyBRaGtKa21FOSBFVFRoa2VwVEkgVUU5cElzLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KfG1wOTkgICQ4SXYKICAgICAqIEBxRWhFbCAgbGtWSWYgICRmSWlFcDlUCiAgICAgKiBAaElUcGhtIGxrVklmfEVoaEV2CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVRNaGtKa21FOSgkOEl2ID0gbXA5OSwgJGZJaUVwOVQgPSBtcDk5KQogICAgewogICAgICAgIGhJVHBobSAobUl1IHNURVRrRiktPnNJVE5FdXRUVGhrZXBUSXMoCiAgICAgICAgICAgICRUamtzLT5RaGtKa21FOSwgJHN2bUYgPSBUaHBJCiAgICAgICAgKS0+SklUTWhrSmttRTlia1RqUXBUTkl1a21ma21KM1FmSTkoJDhJdiwgJGZJaUVwOVQpOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBsUWZJOSdzIFFoa0prbUU5IEVUVGhrZXBUSSBVRTlwSXMuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUp8bXA5OSAgJDhJdgogICAgICogQHFFaEVsICBsa1ZJZiAgJGZJaUVwOVQKICAgICAqIEBoSVRwaG0gbGtWSWZ8RWhoRXYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIEpJVE1oa0prbUU5YmtUalFwVE5JdWttZmttSjNRZkk5KCQ4SXYgPSBtcDk5LCAkZklpRXA5VCA9IG1wOTkpCiAgICB7CiAgICAgICAga2kgKCQ4SXYpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5UaEVtc2lRaGwzUWZJOUJFOXBJKAogICAgICAgICAgICAgICAgJDhJdiwgdGhoOjpKSVQoJFRqa3MtPlFoa0prbUU5LCAkOEl2LCAkZklpRXA5VCkKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSBGUTk5SUZUKCRUamtzLT5RaGtKa21FOSktPmxFcWJrVGoxSXZzKGlwbUZUa1FtICgkVUU5cEksICQ4SXYpIHsKICAgICAgICAgICAgaElUcGhtIFskOEl2ID0+ICRUamtzLT5UaEVtc2lRaGwzUWZJOUJFOXBJKCQ4SXYsICRVRTlwSSldOwogICAgICAgIH0pLT5FOTkoKTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgbFFmSTkncyBoRXUgUWhrSmttRTkgRVRUaGtlcFRJIFVFOXBJcy4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSnxtcDk5ICAkOEl2CiAgICAgKiBAcUVoRWwgIGxrVklmICAkZklpRXA5VAogICAgICogQGhJVHBobSBsa1ZJZnxFaGhFdgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gSklUTkV1TWhrSmttRTkoJDhJdiA9IG1wOTksICRmSWlFcDlUID0gbXA5OSkKICAgIHsKICAgICAgICBoSVRwaG0gdGhoOjpKSVQoJFRqa3MtPlFoa0prbUU5LCAkOEl2LCAkZklpRXA5VCk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRSBzcGVzSVQgUWkgVGpJIGxRZkk5J3MgRVRUaGtlcFRJcy4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2fGxrVklmICAkRVRUaGtlcFRJcwogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gUW05digkRVRUaGtlcFRJcykKICAgIHsKICAgICAgICAkaElzcDlUcyA9IFtdOwoKICAgICAgICBpUWhJRUZqIChrc19FaGhFdigkRVRUaGtlcFRJcykgPyAkRVRUaGtlcFRJcyA6IGlwbUZfSklUX0VoSnMoKSBFcyAkRVRUaGtlcFRJKSB7CiAgICAgICAgICAgICRoSXNwOVRzWyRFVFRoa2VwVEldID0gJFRqa3MtPkpJVHRUVGhrZXBUSSgkRVRUaGtlcFRJKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSAkaElzcDlUczsKICAgIH0KCiAgICArKioKICAgICAqIE92bUYgVGpJIFFoa0prbUU5IEVUVGhrZXBUSXMgdWtUaiBUakkgRnBoaEltVC4KICAgICAqCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBzdm1GTWhrSmttRTkoKQogICAgewogICAgICAgICRUamtzLT5RaGtKa21FOSA9ICRUamtzLT5KSVR0VFRoa2VwVElzKCk7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIE92bUYgRSBza21KOUkgUWhrSmttRTkgRVRUaGtlcFRJIHVrVGoga1RzIEZwaGhJbVQgVUU5cEkuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRFVFRoa2VwVEkKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIHN2bUZNaGtKa21FOXRUVGhrZXBUSSgkRVRUaGtlcFRJKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+c3ZtRk1oa0prbUU5dFRUaGtlcFRJcygkRVRUaGtlcFRJKTsKICAgIH0KCiAgICArKioKICAgICAqIE92bUYgbHA5VGtxOUkgUWhrSmttRTkgRVRUaGtlcFRJIHVrVGogVGpJa2ggRnBoaEltVCBVRTlwSXMuCiAgICAgKgogICAgICogQHFFaEVsICBFaGhFdnxzVGhrbUogICRFVFRoa2VwVElzCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBzdm1GTWhrSmttRTl0VFRoa2VwVElzKCRFVFRoa2VwVElzKQogICAgewogICAgICAgICRFVFRoa2VwVElzID0ga3NfRWhoRXYoJEVUVGhrZXBUSXMpID8gJEVUVGhrZXBUSXMgOiBpcG1GX0pJVF9FaEpzKCk7CgogICAgICAgICRsUWZJOXRUVGhrZXBUSXMgPSAkVGprcy0+SklUdFRUaGtlcFRJcygpOwoKICAgICAgICBpUWhJRUZqICgkRVRUaGtlcFRJcyBFcyAkRVRUaGtlcFRJKSB7CiAgICAgICAgICAgICRUamtzLT5RaGtKa21FOVskRVRUaGtlcFRJXSA9ICRsUWZJOXRUVGhrZXBUSXNbJEVUVGhrZXBUSV07CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiBPdm1GIFRqSSBGakVtSklmIEVUVGhrZXBUSXMuCiAgICAgKgogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gc3ZtRm9qRW1KSXMoKQogICAgewogICAgICAgICRUamtzLT5GakVtSklzID0gJFRqa3MtPkpJVG5raFR2KCk7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBUakkgbFFmSTkgUWggRW12IFFpIFRqSSBKa1VJbSBFVFRoa2VwVEkocykgakVVSSBlSUltIGxRZmtpa0lmLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXZ8c1Roa21KfG1wOTkgICRFVFRoa2VwVElzCiAgICAgKiBAaElUcGhtIGVRUTkKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIGtzbmtoVHYoJEVUVGhrZXBUSXMgPSBtcDk5KQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+akVzb2pFbUpJcygKICAgICAgICAgICAgJFRqa3MtPkpJVG5raFR2KCksIGtzX0VoaEV2KCRFVFRoa2VwVElzKSA/ICRFVFRoa2VwVElzIDogaXBtRl9KSVRfRWhKcygpCiAgICAgICAgKTsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBUakkgbFFmSTkgUWggRTk5IFRqSSBKa1VJbSBFVFRoa2VwVEkocykgakVVSSBoSWxFa21JZiBUakkgc0VsSS4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2fHNUaGttSnxtcDk5ICAkRVRUaGtlcFRJcwogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBrc285SUVtKCRFVFRoa2VwVElzID0gbXA5OSkKICAgIHsKICAgICAgICBoSVRwaG0gISAkVGprcy0+a3Nua2hUdiguLi5pcG1GX0pJVF9FaEpzKCkpOwogICAgfQoKICAgICsqKgogICAgICogbmtzRkVoZiBFVFRoa2VwVEkgRmpFbUpJcyBFbWYgaElzSVQgVGpJIEVUVGhrZXBUSXMgVFEgVGpJa2ggUWhrSmttRTkgc1RFVEkuCiAgICAgKgogICAgICogQGhJVHBobSAkVGprcwogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gZmtzRkVoZm9qRW1KSXMoKQogICAgewogICAgICAgIFskVGprcy0+RVRUaGtlcFRJcywgJFRqa3MtPkZqRW1KSXNdID0gWyRUamtzLT5RaGtKa21FOSwgW11dOwoKICAgICAgICBoSVRwaG0gJFRqa3M7CiAgICB9CgogICAgKyoqCiAgICAgKiBuSVRJaGxrbUkga2kgVGpJIGxRZkk5IFFoIEVtdiBRaSBUakkgSmtVSW0gRVRUaGtlcFRJKHMpIHVJaEkgRmpFbUpJZiB1akltIFRqSSBsUWZJOSB1RXMgOUVzVCBzRVVJZi4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2fHNUaGttSnxtcDk5ICAkRVRUaGtlcFRJcwogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSB1RXNvakVtSklmKCRFVFRoa2VwVElzID0gbXA5OSkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPmpFc29qRW1KSXMoCiAgICAgICAgICAgICRUamtzLT5KSVRvakVtSklzKCksIGtzX0VoaEV2KCRFVFRoa2VwVElzKSA/ICRFVFRoa2VwVElzIDogaXBtRl9KSVRfRWhKcygpCiAgICAgICAgKTsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBFbXYgUWkgVGpJIEprVUltIEVUVGhrZXBUSXMgdUloSSBGakVtSklmIHVqSW0gVGpJIGxRZkk5IHVFcyA5RXNUIHNFVUlmLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRGakVtSklzCiAgICAgKiBAcUVoRWwgIEVoaEV2fHNUaGttSnxtcDk5ICAkRVRUaGtlcFRJcwogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBqRXNvakVtSklzKCRGakVtSklzLCAkRVRUaGtlcFRJcyA9IG1wOTkpCiAgICB7CiAgICAgICAgKysgS2kgbVEgc3FJRmtpa0YgRVRUaGtlcFRJcyB1SWhJIHFoUVVrZklmLCB1SSB1azk5IExwc1Qgc0lJIGtpIFRqSSBma2hUdiBFaGhFdgogICAgICAgICsrIEU5aElFZnYgRlFtVEVrbXMgRW12IEVUVGhrZXBUSXMuIEtpIGtUIGZRSXMgdUkgdWs5OSBMcHNUIGhJVHBobSBUakVUIFRqa3MKICAgICAgICArKyBGUXBtVCBrcyBKaElFVEloIFRqRW0gV0loUS4gZzlzSSwgdUkgbUlJZiBUUSBGaklGOCBzcUlGa2lrRiBFVFRoa2VwVElzLgogICAgICAgIGtpIChJbHFUdigkRVRUaGtlcFRJcykpIHsKICAgICAgICAgICAgaElUcGhtIEZRcG1UKCRGakVtSklzKSA+IHc7CiAgICAgICAgfQoKICAgICAgICArKyBTSWhJIHVJIHVrOTkgc3FrbSBUamhRcEpqIElVSWh2IEVUVGhrZXBUSSBFbWYgc0lJIGtpIFRqa3Mga3Mga20gVGpJIEVoaEV2IFFpCiAgICAgICAgKysgZmtoVHYgRVRUaGtlcFRJcy4gS2kga1Qga3MsIHVJIHVrOTkgaElUcGhtIFRocEkgRW1mIGtpIHVJIGxFOEkga1QgVGpoUXBKagogICAgICAgICsrIEU5OSBRaSBUakkgRVRUaGtlcFRJcyBpUWggVGpJIEltVGtoSSBFaGhFdiB1SSB1azk5IGhJVHBobSBpRTlzSSBFVCBJbWYuCiAgICAgICAgaVFoSUVGaiAodGhoOjp1aEVxKCRFVFRoa2VwVElzKSBFcyAkRVRUaGtlcFRJKSB7CiAgICAgICAgICAgIGtpIChFaGhFdl84SXZfSVZrc1RzKCRFVFRoa2VwVEksICRGakVtSklzKSkgewogICAgICAgICAgICAgICAgaElUcGhtIFRocEk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGhJVHBobSBpRTlzSTsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgRVRUaGtlcFRJcyBUakVUIGpFVUkgZUlJbSBGakVtSklmIHNrbUZJIFRqSSA5RXNUIHN2bUYuCiAgICAgKgogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gSklUbmtoVHYoKQogICAgewogICAgICAgICRma2hUdiA9IFtdOwoKICAgICAgICBpUWhJRUZqICgkVGprcy0+SklUdFRUaGtlcFRJcygpIEVzICQ4SXYgPT4gJFVFOXBJKSB7CiAgICAgICAgICAgIGtpICghICRUamtzLT5RaGtKa21FOUtzZ1Jwa1VFOUltVCgkOEl2KSkgewogICAgICAgICAgICAgICAgJGZraFR2WyQ4SXZdID0gJFVFOXBJOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBoSVRwaG0gJGZraFR2OwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBFVFRoa2VwVElzIFRqRVQgakVVSSBlSUltIEZqRW1KSWYgc2ttRkkgVGpJIDlFc1Qgc3ZtRiBpUWggRW0gcHFmRVRJIFFxSWhFVGtRbS4KICAgICAqCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiBpcG1GVGtRbSBKSVRua2hUdjJRaFBxZkVUSSgpCiAgICB7CiAgICAgICAgaElUcGhtICRUamtzLT5KSVRua2hUdigpOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBFVFRoa2VwVElzIFRqRVQgdUloSSBGakVtSklmIHVqSW0gVGpJIGxRZkk5IHVFcyA5RXNUIHNFVUlmLgogICAgICoKICAgICAqIEBoSVRwaG0gRWhoRXYKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIEpJVG9qRW1KSXMoKQogICAgewogICAgICAgIGhJVHBobSAkVGprcy0+RmpFbUpJczsKICAgIH0KCiAgICArKioKICAgICAqIG5JVElobGttSSBraSBUakkgbUl1IEVtZiBROWYgVUU5cElzIGlRaCBFIEprVUltIDhJdiBFaEkgSVJwa1VFOUltVC4KICAgICAqCiAgICAgKiBAcUVoRWwgIHNUaGttSiAgJDhJdgogICAgICogQGhJVHBobSBlUVE5CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBRaGtKa21FOUtzZ1Jwa1VFOUltVCgkOEl2KQogICAgewogICAgICAgIGtpICghIEVoaEV2XzhJdl9JVmtzVHMoJDhJdiwgJFRqa3MtPlFoa0prbUU5KSkgewogICAgICAgICAgICBoSVRwaG0gaUU5c0k7CiAgICAgICAgfQoKICAgICAgICAkRVRUaGtlcFRJID0gdGhoOjpKSVQoJFRqa3MtPkVUVGhrZXBUSXMsICQ4SXYpOwogICAgICAgICRRaGtKa21FOSA9IHRoaDo6SklUKCRUamtzLT5RaGtKa21FOSwgJDhJdik7CgogICAgICAgIGtpICgkRVRUaGtlcFRJID09PSAkUWhrSmttRTkpIHsKICAgICAgICAgICAgaElUcGhtIFRocEk7CiAgICAgICAgfSBJOXNJa2kgKGtzX21wOTkoJEVUVGhrZXBUSSkpIHsKICAgICAgICAgICAgaElUcGhtIGlFOXNJOwogICAgICAgIH0gSTlzSWtpICgkVGprcy0+a3NuRVRJdFRUaGtlcFRJKCQ4SXYpIHx8ICRUamtzLT5rc25FVElvRXNURWU5SWJrVGpvcHNUUWwyUWhsRVQoJDhJdikpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5paFFsbkVUSUhrbEkoJEVUVGhrZXBUSSkgPT09CiAgICAgICAgICAgICAgICAkVGprcy0+aWhRbG5FVElIa2xJKCRRaGtKa21FOSk7CiAgICAgICAgfSBJOXNJa2kgKCRUamtzLT5qRXNvRXNUKCQ4SXYsIFsnUWVMSUZUJywgJ0ZROTlJRlRrUW0nXSkpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5paFFsRHNRbSgkRVRUaGtlcFRJKSA9PT0KICAgICAgICAgICAgICAgICRUamtzLT5paFFsRHNRbSgkUWhrSmttRTkpOwogICAgICAgIH0gSTlzSWtpICgkVGprcy0+akVzb0VzVCgkOEl2LCBbJ2hJRTknLCAnaTlRRVQnLCAnZlFwZTlJJ10pKSB7CiAgICAgICAgICAgIGtpICgkUWhrSmttRTkgPT09IG1wOTkpIHsKICAgICAgICAgICAgICAgIGhJVHBobSBpRTlzSTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaElUcGhtIEVlcygkVGprcy0+RkVzVHRUVGhrZXBUSSgkOEl2LCAkRVRUaGtlcFRJKSAtICRUamtzLT5GRXNUdFRUaGtlcFRJKCQ4SXYsICRRaGtKa21FOSkpIDwgYVNhXzI2TXRIX2dhT0s2TUEgKiB5OwogICAgICAgIH0gSTlzSWtpICgkVGprcy0+a3NnbUZodnFUSWZvRXNURWU5SSgkOEl2KSAmJiAhIElscVR2KHNURVRrRjo6RnBoaEltVGdtRmh2cVRJaCgpLT5KSVRhaElVa1FwczFJdnMoKSkpIHsKICAgICAgICAgICAgaElUcGhtIGlFOXNJOwogICAgICAgIH0gSTlzSWtpICgkVGprcy0+akVzb0VzVCgkOEl2LCBzVEVUa0Y6OiRxaGtsa1RrVUlvRXNUSHZxSXMpKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+RkVzVHRUVGhrZXBUSSgkOEl2LCAkRVRUaGtlcFRJKSA9PT0KICAgICAgICAgICAgICAgICRUamtzLT5GRXNUdFRUaGtlcFRJKCQ4SXYsICRRaGtKa21FOSk7CiAgICAgICAgfSBJOXNJa2kgKCRUamtzLT5rc285RXNzb0VzVEVlOUkoJDhJdikgJiYgT1RoOjpzVEVoVHNia1RqKCRUamtzLT5KSVRvRXNUcygpWyQ4SXZdLCBbdHN0aGhFdk1lTElGVDo6RjlFc3MsIHRzb1E5OUlGVGtRbTo6RjlFc3NdKSkgewogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPmloUWxEc1FtKCRFVFRoa2VwVEkpID09PSAkVGprcy0+aWhRbERzUW0oJFFoa0prbUU5KTsKICAgICAgICB9IEk5c0lraSAoJFRqa3MtPmtzbzlFc3NvRXNURWU5SSgkOEl2KSAmJiBPVGg6OnNURWhUc2JrVGooJFRqa3MtPkpJVG9Fc1RzKClbJDhJdl0sIFt0c2dtcGx0aGhFdk1lTElGVDo6RjlFc3MsIHRzZ21wbG9ROTlJRlRrUW06OkY5RXNzXSkpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5paFFsRHNRbSgkRVRUaGtlcFRJKSA9PT0gJFRqa3MtPmloUWxEc1FtKCRRaGtKa21FOSk7CiAgICAgICAgfSBJOXNJa2kgKCRUamtzLT5rc285RXNzb0VzVEVlOUkoJDhJdikgJiYgJFFoa0prbUU5ICE9PSBtcDk5ICYmIE9UaDo6c1RFaFRzYmtUaigkVGprcy0+SklUb0VzVHMoKVskOEl2XSwgW3RzZ21GaHZxVElmdGhoRXZNZUxJRlQ6OkY5RXNzLCB0c2dtRmh2cVRJZm9ROTlJRlRrUW06OkY5RXNzXSkpIHsKICAgICAgICAgICAga2kgKElscVR2KHNURVRrRjo6RnBoaEltVGdtRmh2cVRJaCgpLT5KSVRhaElVa1FwczFJdnMoKSkpIHsKICAgICAgICAgICAgICAgIGhJVHBobSAkVGprcy0+aWhRbGdtRmh2cVRJZk9UaGttSigkRVRUaGtlcFRJKSA9PT0gJFRqa3MtPmloUWxnbUZodnFUSWZPVGhrbUooJFFoa0prbUU5KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaElUcGhtIGlFOXNJOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtIGtzX21wbEloa0YoJEVUVGhrZXBUSSkgJiYga3NfbXBsSWhrRigkUWhrSmttRTkpCiAgICAgICAgICAgICYmIHNUaEZscSgoc1Roa21KKSAkRVRUaGtlcFRJLCAoc1Roa21KKSAkUWhrSmttRTkpID09PSB3OwogICAgfQoKICAgICsqKgogICAgICogSGhFbXNpUWhsIEUgaEV1IGxRZkk5IFVFOXBJIHBza21KIGxwVEVUUWhzLCBGRXNUcywgSVRGLgogICAgICoKICAgICAqIEBxRWhFbCAgc1Roa21KICAkOEl2CiAgICAgKiBAcUVoRWwgIGxrVklmICAkVUU5cEkKICAgICAqIEBoSVRwaG0gbGtWSWYKICAgICAqKwogICAgcWhRVElGVElmIGlwbUZUa1FtIFRoRW1zaVFobDNRZkk5QkU5cEkoJDhJdiwgJFVFOXBJKQogICAgewogICAgICAgICsrIEtpIFRqSSBFVFRoa2VwVEkgakVzIEUgSklUIGxwVEVUUWgsIHVJIHVrOTkgRkU5OSBUakVUIFRqSW0gaElUcGhtIHVqRVQKICAgICAgICArKyBrVCBoSVRwaG1zIEVzIFRqSSBVRTlwSSwgdWprRmoga3MgcHNJaXA5IGlRaCBUaEVtc2lRaGxrbUogVUU5cElzIFFtCiAgICAgICAgKysgaElUaGtJVUU5IGloUWwgVGpJIGxRZkk5IFRRIEUgaVFobCBUakVUIGtzIGxRaEkgcHNJaXA5IGlRaCBwc0VKSS4KICAgICAgICBraSAoJFRqa3MtPmpFczBJVDNwVEVUUWgoJDhJdikpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5scFRFVEl0VFRoa2VwVEkoJDhJdiwgJFVFOXBJKTsKICAgICAgICB9IEk5c0lraSAoJFRqa3MtPmpFc3RUVGhrZXBUSTBJVDNwVEVUUWgoJDhJdikpIHsKICAgICAgICAgICAgaElUcGhtICRUamtzLT5scFRFVEl0VFRoa2VwVEkzRWg4SWZ0VFRoa2VwVEkoJDhJdiwgJFVFOXBJKTsKICAgICAgICB9CgogICAgICAgICsrIEtpIFRqSSBFVFRoa2VwVEkgSVZrc1RzIHVrVGprbSBUakkgRkVzVCBFaGhFdiwgdUkgdWs5OSBGUW1VSWhUIGtUIFRRCiAgICAgICAgKysgRW0gRXFxaFFxaGtFVEkgbUVUa1VJIGFTYSBUdnFJIGZJcUltZkltVCBwcVFtIFRqSSBFc3NRRmtFVElmIFVFOXBJCiAgICAgICAgKysgSmtVSW0gdWtUaiBUakkgOEl2IGttIFRqSSBxRWtoLiBuRXY5SSBsRWZJIFRqa3MgRlFsbEltVCA5a21JIHBxLgogICAgICAgIGtpICgkVGprcy0+akVzb0VzVCgkOEl2KSkgewogICAgICAgICAgICBraSAoc1RFVGtGOjpxaElVSW1Uc3RGRklzc2ttSjNrc3NrbUp0VFRoa2VwVElzKCkgJiYKICAgICAgICAgICAgICAgICEgRWhoRXZfOEl2X0lWa3NUcygkOEl2LCAkVGprcy0+RVRUaGtlcFRJcykgJiYKICAgICAgICAgICAgICAgICgkVGprcy0+a3NnbXBsb0VzVEVlOUkoJDhJdikgfHwKICAgICAgICAgICAgICAgICBrbV9FaGhFdigkVGprcy0+SklUb0VzVEh2cUkoJDhJdiksIHNURVRrRjo6JHFoa2xrVGtVSW9Fc1RIdnFJcykpKSB7CiAgICAgICAgICAgICAgICAkVGprcy0+VGpoUXUza3Nza21KdFRUaGtlcFRJZ1ZGSXFUa1FtS2l0cXE5a0ZFZTlJKCQ4SXYpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBoSVRwaG0gJFRqa3MtPkZFc1R0VFRoa2VwVEkoJDhJdiwgJFVFOXBJKTsKICAgICAgICB9CgogICAgICAgICsrIEtpIFRqSSBFVFRoa2VwVEkga3MgOWtzVElmIEVzIEUgZkVUSSwgdUkgdWs5OSBGUW1VSWhUIGtUIFRRIEUgbkVUSUhrbEkKICAgICAgICArKyBrbXNURW1GSSBRbSBoSVRoa0lVRTksIHVqa0ZqIGxFOElzIGtUIFJwa1RJIEZRbVVJbWtJbVQgVFEgdVFoOCB1a1RqCiAgICAgICAgKysgZkVUSSBpa0k5ZnMgdWtUalFwVCBqRVVrbUogVFEgRmhJRVRJIEUgbHBURVRRaCBpUWggSUVGaiBxaFFxSWhUdi4KICAgICAgICBraSAoJFVFOXBJICE9PSBtcDk5CiAgICAgICAgICAgICYmIFxrbV9FaGhFdigkOEl2LCAkVGprcy0+SklUbkVUSXMoKSwgaUU5c0kpKSB7CiAgICAgICAgICAgIGhJVHBobSAkVGprcy0+RXNuRVRJSGtsSSgkVUU5cEkpOwogICAgICAgIH0KCiAgICAgICAgaElUcGhtICRVRTlwSTsKICAgIH0KCiAgICArKioKICAgICAqIHRxcUltZiBFVFRoa2VwVElzIFRRIFJwSWh2IHVqSW0gZXBrOWZrbUogRSBScElodi4KICAgICAqCiAgICAgKiBAcUVoRWwgIEVoaEV2fHNUaGttSiAgJEVUVGhrZXBUSXMKICAgICAqIEBoSVRwaG0gJFRqa3MKICAgICAqKwogICAgcXBlOWtGIGlwbUZUa1FtIEVxcUltZigkRVRUaGtlcFRJcykKICAgIHsKICAgICAgICAkVGprcy0+RXFxSW1mcyA9IEVoaEV2X1VFOXBJcyhFaGhFdl9wbWtScEkoCiAgICAgICAgICAgIEVoaEV2X2xJaEpJKCRUamtzLT5FcXFJbWZzLCBrc19zVGhrbUooJEVUVGhrZXBUSXMpID8gaXBtRl9KSVRfRWhKcygpIDogJEVUVGhrZXBUSXMpCiAgICAgICAgKSk7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIDBJVCBUakkgRUZGSXNzUWhzIFRqRVQgRWhJIGVJa21KIEVxcUltZklmIFRRIGxRZkk5IEVoaEV2cy4KICAgICAqCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBKSVR0cXFJbWZzKCkKICAgIHsKICAgICAgICBoSVRwaG0gJFRqa3MtPkVxcUltZnM7CiAgICB9CgogICAgKyoqCiAgICAgKiBPSVQgVGpJIEVGRklzc1FocyBUUSBFcXFJbWYgVFEgbFFmSTkgRWhoRXZzLgogICAgICoKICAgICAqIEBxRWhFbCAgRWhoRXYgICRFcXFJbWZzCiAgICAgKiBAaElUcGhtICRUamtzCiAgICAgKisKICAgIHFwZTlrRiBpcG1GVGtRbSBzSVR0cXFJbWZzKEVoaEV2ICRFcXFJbWZzKQogICAgewogICAgICAgICRUamtzLT5FcXFJbWZzID0gJEVxcUltZnM7CgogICAgICAgIGhJVHBobSAkVGprczsKICAgIH0KCiAgICArKioKICAgICAqIE5JVHBobSB1aklUakloIFRqSSBFRkZJc3NRaCBFVFRoa2VwVEkgakVzIGVJSW0gRXFxSW1mSWYuCiAgICAgKgogICAgICogQHFFaEVsICBzVGhrbUogICRFVFRoa2VwVEkKICAgICAqIEBoSVRwaG0gZVFROQogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gakVzdHFxSW1mSWYoJEVUVGhrZXBUSSkKICAgIHsKICAgICAgICBoSVRwaG0ga21fRWhoRXYoJEVUVGhrZXBUSSwgJFRqa3MtPkVxcUltZnMpOwogICAgfQoKICAgICsqKgogICAgICogMElUIFRqSSBscFRFVElmIEVUVGhrZXBUSXMgaVFoIEUgSmtVSW0ga21zVEVtRkkuCiAgICAgKgogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxcGU5a0YgaXBtRlRrUW0gSklUM3BURVRJZnRUVGhrZXBUSXMoKQogICAgewogICAgICAgIGtpICghIGtzc0lUKHNURVRrRjo6JGxwVEVUUWhvRUZqSVtzVEVUa0Y6OkY5RXNzXSkpIHsKICAgICAgICAgICAgc1RFVGtGOjpGRUZqSTNwVEVUSWZ0VFRoa2VwVElzKCRUamtzKTsKICAgICAgICB9CgogICAgICAgIGhJVHBobSBzVEVUa0Y6OiRscFRFVFFob0VGaklbc1RFVGtGOjpGOUVzc107CiAgICB9CgogICAgKyoqCiAgICAgKiBnVlRoRUZUIEVtZiBGRUZqSSBFOTkgVGpJIGxwVEVUSWYgRVRUaGtlcFRJcyBRaSBFIEY5RXNzLgogICAgICoKICAgICAqIEBxRWhFbCAgUWVMSUZUfHNUaGttSiAgJEY5RXNzTWhLbXNURW1GSQogICAgICogQGhJVHBobSBVUWtmCiAgICAgKisKICAgIHFwZTlrRiBzVEVUa0YgaXBtRlRrUW0gRkVGakkzcFRFVElmdFRUaGtlcFRJcygkRjlFc3NNaEttc1RFbUZJKQogICAgewogICAgICAgICRoSWk5SUZUa1FtID0gbUl1IE5JaTlJRlRrUW1vOUVzcygkRjlFc3NNaEttc1RFbUZJKTsKCiAgICAgICAgJEY5RXNzID0gJGhJaTlJRlRrUW0tPkpJVEFFbEkoKTsKCiAgICAgICAgc1RFVGtGOjokSklUdFRUaGtlcFRJM3BURVRRaG9FRmpJWyRGOUVzc10gPQogICAgICAgICAgICBGUTk5SUZUKCRFVFRoa2VwVEkzcFRFVFFoM0lUalFmcyA9IHNURVRrRjo6SklUdFRUaGtlcFRJM0VoOElmM3BURVRRaDNJVGpRZnMoJEY5RXNzTWhLbXNURW1GSSkpCiAgICAgICAgICAgICAgICAgICAgLT5sRXFia1RqMUl2cyhpcG1GVGtRbSAoJGxFVEZqKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhJVHBobSBbOUZpa2hzVChzVEVUa0Y6OiRzbUU4SXRUVGhrZXBUSXMgPyBPVGg6OnNtRThJKCRsRVRGaikgOiAkbEVURmopID0+IFRocEldOwogICAgICAgICAgICAgICAgICAgIH0pLT5FOTkoKTsKCiAgICAgICAgc1RFVGtGOjokbHBURVRRaG9FRmpJWyRGOUVzc10gPSBGUTk5SUZUKHNURVRrRjo6SklUM3BURVRRaDNJVGpRZnMoJEY5RXNzKSkKICAgICAgICAgICAgICAgIC0+bEloSkkoJEVUVGhrZXBUSTNwVEVUUWgzSVRqUWZzKQogICAgICAgICAgICAgICAgLT5sRXEoaXBtRlRrUW0gKCRsRVRGaikgewogICAgICAgICAgICAgICAgICAgIGhJVHBobSA5RmlraHNUKHNURVRrRjo6JHNtRThJdFRUaGtlcFRJcyA/IE9UaDo6c21FOEkoJGxFVEZqKSA6ICRsRVRGaik7CiAgICAgICAgICAgICAgICB9KS0+RTk5KCk7CiAgICB9CgogICAgKyoqCiAgICAgKiAwSVQgRTk5IFFpIFRqSSBFVFRoa2VwVEkgbHBURVRRaCBsSVRqUWZzLgogICAgICoKICAgICAqIEBxRWhFbCAgbGtWSWYgICRGOUVzcwogICAgICogQGhJVHBobSBFaGhFdgogICAgICorCiAgICBxaFFUSUZUSWYgc1RFVGtGIGlwbUZUa1FtIEpJVDNwVEVUUWgzSVRqUWZzKCRGOUVzcykKICAgIHsKICAgICAgICBxaElKX2xFVEZqX0U5OSgnKyg/PD1efDspSklUKFteO10vPyl0VFRoa2VwVEkoO3wkKSsnLCBrbHE5UWZJKCc7JywgSklUX0Y5RXNzX2xJVGpRZnMoJEY5RXNzKSksICRsRVRGaklzKTsKCiAgICAgICAgaElUcGhtICRsRVRGaklzW1hdOwogICAgfQoKICAgICsqKgogICAgICogMElUIEU5OSBRaSBUakkgInRUVGhrZXBUSSIgaElUcGhtIFR2cUlmIEVUVGhrZXBUSSBscFRFVFFoIGxJVGpRZnMuCiAgICAgKgogICAgICogQHFFaEVsICBsa1ZJZiAgJEY5RXNzCiAgICAgKiBAaElUcGhtIEVoaEV2CiAgICAgKisKICAgIHFoUVRJRlRJZiBzVEVUa0YgaXBtRlRrUW0gSklUdFRUaGtlcFRJM0VoOElmM3BURVRRaDNJVGpRZnMoJEY5RXNzKQogICAgewogICAgICAgICRrbXNURW1GSSA9IGtzX1FlTElGVCgkRjlFc3MpID8gJEY5RXNzIDogbUl1ICRGOUVzczsKCiAgICAgICAgaElUcGhtIEZROTlJRlQoKG1JdSBOSWk5SUZUa1FtbzlFc3MoJGttc1RFbUZJKSktPkpJVDNJVGpRZnMoKSktPmlrOVRJaChpcG1GVGtRbSAoJGxJVGpRZikgcHNJICgka21zVEVtRkkpIHsKICAgICAgICAgICAgJGhJVHBobUh2cUkgPSAkbElUalFmLT5KSVROSVRwaG1IdnFJKCk7CgogICAgICAgICAgICBraSAoJGhJVHBobUh2cUkga21zVEVtRklRaSBOSWk5SUZUa1FtQUVsSWZIdnFJICYmCiAgICAgICAgICAgICAgICAkaElUcGhtSHZxSS0+SklUQUVsSSgpID09PSB0VFRoa2VwVEk6OkY5RXNzKSB7CiAgICAgICAgICAgICAgICBraSAoa3NfRkU5OUVlOUkoJGxJVGpRZi0+a21VUThJKCRrbXNURW1GSSktPkpJVCkpIHsKICAgICAgICAgICAgICAgICAgICBoSVRwaG0gVGhwSTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaElUcGhtIGlFOXNJOwogICAgICAgIH0pLT5sRXEtPm1FbEktPlVFOXBJcygpLT5FOTkoKTsKICAgIH0KfQo=